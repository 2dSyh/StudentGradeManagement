----------------------------------------------------------------
// FILE: src\grademanager\controller\AdminDashboardController.java
----------------------------------------------------------------
package grademanager.controller;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.fxml.FXMLLoader;
import java.io.IOException;

public class AdminDashboardController {

    @FXML private Button studentManagementButton;
    @FXML private Button teacherManagementButton;
    @FXML private Button classManagementButton;
    @FXML private Button subjectManagementButton;
    @FXML private Button assignmentButton;
    @FXML private Button logoutButton;

    @FXML private AnchorPane mainContentPane;

    // Má»Ÿ mÃ n hÃ¬nh quáº£n lÃ½ sinh viÃªn
    @FXML
    private void handleStudentManagement() {
        loadView("/grademanager/view/StudentManagementView.fxml");
    }

    // Má»Ÿ mÃ n hÃ¬nh quáº£n lÃ½ giÃ¡o viÃªn
    @FXML
    private void handleTeacherManagement() {
        loadView("/grademanager/view/TeacherManagementView.fxml");
    }

    // Má»Ÿ mÃ n hÃ¬nh quáº£n lÃ½ lá»›p há»c
    @FXML
    private void handleClassManagement() {
        loadView("/grademanager/view/SchoolClassManagementView.fxml");
    }

    // Má»Ÿ mÃ n hÃ¬nh quáº£n lÃ½ mÃ´n há»c
    @FXML
    private void handleSubjectManagement() {
        loadView("/grademanager/view/SubjectManagementView.fxml");
    }

    // Má»Ÿ mÃ n hÃ¬nh phÃ¢n cÃ´ng giáº£ng dáº¡y
    @FXML
    private void handleAssignment() {
        loadView("/grademanager/view/AssignmentView.fxml");
    }

    // ÄÄƒng xuáº¥t
    // ÄÄƒng xuáº¥t - Cáº§n thay Ä‘á»•i toÃ n bá»™ Scene chá»© khÃ´ng chá»‰ loadView
    @FXML
    private void handleLogout() {
        try {
            // 1. Load file FXML cá»§a mÃ n hÃ¬nh Login
            // LÆ°u Ã½: Äáº£m báº£o Ä‘Æ°á»ng dáº«n Ä‘Ãºng lÃ  LoginScreen.fxml
            Parent root = FXMLLoader.load(getClass().getResource("/grademanager/view/LoginScreen.fxml"));
            
            // 2. Táº¡o Scene má»›i
            Scene scene = new Scene(root);
            
            // 3. Láº¥y Stage (cá»­a sá»•) hiá»‡n táº¡i tá»« nÃºt Logout
            Stage stage = (Stage) logoutButton.getScene().getWindow();
            
            // 4. Set Scene má»›i cho Stage (thay tháº¿ hoÃ n toÃ n giao diá»‡n cÅ©)
            stage.setScene(scene);
            stage.centerOnScreen(); // CÄƒn giá»¯a mÃ n hÃ¬nh cho Ä‘áº¹p
            
            System.out.println("ÄÄƒng xuáº¥t thÃ nh cÃ´ng!");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // HÃ m tiá»‡n Ã­ch Ä‘á»ƒ load view khÃ¡c vÃ o mainContentPane
    private void loadView(String fxmlPath) {
        try {
            Parent view = FXMLLoader.load(getClass().getResource(fxmlPath));
            mainContentPane.getChildren().setAll(view);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\AssignmentController.java
----------------------------------------------------------------
package grademanager.controller;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

import java.util.ArrayList;
import java.util.List;

import grademanager.dao.*;
import grademanager.model.*;

public class AssignmentController {

    @FXML private ComboBox<String> teacherComboBox;
    @FXML private ComboBox<String> classComboBox;
    @FXML private ComboBox<String> subjectComboBox;

    @FXML private TableView<Assignment> assignmentTableView;
    @FXML private TableColumn<Assignment, String> teacherNameColumn;
    @FXML private TableColumn<Assignment, String> classNameColumn;
    @FXML private TableColumn<Assignment, String> subjectNameColumn;

    @FXML private Button addButton;
    @FXML private Button deleteButton;

    private ObservableList<Assignment> assignmentList = FXCollections.observableArrayList();
    private AssignmentDAO assignmentDAO = new AssignmentDAO();

    @FXML
    private void initialize() {
        assignmentList.addAll(assignmentDAO.getAll());
        assignmentTableView.setItems(assignmentList);

        //Láº¥y tÃªn giÃ¡o viÃªn
        TeacherDAO teacherDAO = new TeacherDAO();
        List<Teacher> teachers = teacherDAO.getAll();
        List<String> name =  new ArrayList<>();
        for(Teacher t: teachers){
            name.add(t.getFullName());
        }
        teacherComboBox.setItems(FXCollections.observableArrayList(name));
        
        //Láº¥y tÃªn lá»›p
        ClassroomDAO classroomDAO = new ClassroomDAO();
        List<SchoolClass> classes = classroomDAO.getAll();
        List<String> classNames = new ArrayList<>();
        for(SchoolClass c: classes){
            classNames.add(c.getClassName());
        }
        classComboBox.setItems(FXCollections.observableArrayList(classNames));
        
        //Láº¥y tÃªn mÃ´n há»c
        SubjectDAO subjectDAO = new SubjectDAO();
        List<Subject> subjects = subjectDAO.getAll();
        List<String> subjectNames = new ArrayList<>();
        for(Subject s: subjects){
            subjectNames.add(s.getSubjectName());
        }
        subjectComboBox.setItems(FXCollections.observableArrayList(subjectNames));
    }

    @FXML
    private void handleAddButton() {
        Assignment assignment = new Assignment(0,
            teacherComboBox.getSelectionModel().getSelectedIndex() + 1,
            classComboBox.getSelectionModel().getSelectedIndex() + 1,
            subjectComboBox.getSelectionModel().getSelectedIndex() + 1);
        if (assignmentDAO.insert(assignment)) {
            assignmentList.add(assignment);
        }
    }

    @FXML
    private void handleDeleteButton() {
        Assignment selected = assignmentTableView.getSelectionModel().getSelectedItem();
        if (selected != null && assignmentDAO.delete(selected.getAssignmentId())) {
            assignmentList.remove(selected);
        }
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\GradeManagementController.java
----------------------------------------------------------------
package grademanager.controller;

import grademanager.dao.GradeDAO;
import grademanager.dao.SubjectDAO;
import grademanager.dao.StudentDAO;
import grademanager.model.Grade;
import grademanager.model.Student;
import grademanager.model.Subject;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.util.converter.DoubleStringConverter;

import java.util.List;

public class GradeManagementController {

    @FXML private ComboBox<Integer> studentComboBox;   // chá»n há»c sinh theo ID
    @FXML private ComboBox<String> subjectComboBox;    // chá»n mÃ´n theo tÃªn
    @FXML private Button loadButton;
    @FXML private Button saveButton;
    @FXML private Button avgButton;
    @FXML private Button gpaButton;

    @FXML private TableView<Grade> gradeTableView;
    @FXML private TableColumn<Grade, Integer> gradeIdColumn;
    @FXML private TableColumn<Grade, Integer> studentIdColumn;
    @FXML private TableColumn<Grade, Integer> subjectIdColumn;
    @FXML private TableColumn<Grade, String> gradeTypeColumn;
    @FXML private TableColumn<Grade, Double> scoreColumn;

    @FXML private Label avgLabel;
    @FXML private Label gpaLabel;

    private ObservableList<Grade> gradeList = FXCollections.observableArrayList();
    private GradeDAO gradeDAO = new GradeDAO();
    private SubjectDAO subjectDAO = new SubjectDAO();
    private StudentDAO studentDAO = new StudentDAO();

    // LÆ°u danh sÃ¡ch Ä‘á»ƒ tiá»‡n tÃ¬m láº¡i ID theo tÃªn
    private List<Student> students;
    private List<Subject> subjects;

    @FXML
    private void initialize() {
        // Gáº¯n dá»¯ liá»‡u cá»™t
        gradeIdColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getGradeId()).asObject());
        studentIdColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getStudent()).asObject());
        subjectIdColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getSubject()).asObject());
        gradeTypeColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getGradeType()));
        scoreColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleDoubleProperty(cellData.getValue().getScore()).asObject());

        // Cho phÃ©p chá»‰nh sá»­a trá»±c tiáº¿p Ä‘iá»ƒm
        scoreColumn.setCellFactory(TextFieldTableCell.forTableColumn(new DoubleStringConverter()));
        scoreColumn.setOnEditCommit(event -> {
            Grade g = event.getRowValue();
            g.setScore(event.getNewValue());
            gradeDAO.update(g);
        });

        gradeTableView.setItems(gradeList);
        gradeTableView.setEditable(true);

        // Náº¡p danh sÃ¡ch há»c sinh vÃ  mÃ´n tá»« DAO
        students = studentDAO.getAll();
        subjects = subjectDAO.getAll();

        studentComboBox.setItems(FXCollections.observableArrayList(
            students.stream().map(Student::getStudentId).toList()
        ));
        subjectComboBox.setItems(FXCollections.observableArrayList(
            subjects.stream().map(Subject::getSubjectName).toList()
        ));
    }

    @FXML
    private void handleLoadGrades() {
        gradeList.clear();

        Integer studentId = studentComboBox.getValue();
        String subjectName = subjectComboBox.getValue();

        if (studentId == null || subjectName == null) {
            Alert alert = new Alert(Alert.AlertType.WARNING);
            alert.setTitle("ThÃ´ng bÃ¡o");
            alert.setHeaderText(null);
            alert.setContentText("Vui lÃ²ng chá»n há»c sinh vÃ  mÃ´n há»c trÆ°á»›c khi táº£i Ä‘iá»ƒm!");
            alert.showAndWait();
            return;
        }

        // TÃ¬m subjectId tá»« danh sÃ¡ch subjects
        int subjectId = subjects.stream()
                .filter(s -> s.getSubjectName().equals(subjectName))
                .findFirst()
                .map(Subject::getSubjectId)
                .orElse(-1);

        gradeList.addAll(gradeDAO.getGradesByStudentAndSubject(studentId, subjectId));
    }

    @FXML
    private void handleSaveChanges() {
        for (Grade g : gradeList) {
            gradeDAO.update(g);
        }
        Alert alert = new Alert(Alert.AlertType.INFORMATION);
        alert.setTitle("ThÃ´ng bÃ¡o");
        alert.setHeaderText(null);
        alert.setContentText("ÄÃ£ lÆ°u thay Ä‘á»•i Ä‘iá»ƒm thÃ nh cÃ´ng!");
        alert.showAndWait();
    }

    @FXML
    private void handleCalculateAverage() {
        Integer studentId = studentComboBox.getValue();
        String subjectName = subjectComboBox.getValue();

        if (studentId != null && subjectName != null) {
            int subjectId = subjects.stream()
                    .filter(s -> s.getSubjectName().equals(subjectName))
                    .findFirst()
                    .map(Subject::getSubjectId)
                    .orElse(-1);

            double avg = gradeDAO.getWeightedAverageBySubject(studentId, subjectId);
            avgLabel.setText("Äiá»ƒm TB mÃ´n: " + String.format("%.2f", avg));
        }
    }

    @FXML
    private void handleCalculateGPA() {
        Integer studentId = studentComboBox.getValue();
        if (studentId != null) {
            double gpa = gradeDAO.getOverallAverage(studentId);
            gpaLabel.setText("GPA: " + String.format("%.2f", gpa));
        }
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\LoginController.java
----------------------------------------------------------------
package grademanager.controller;

import java.io.IOException;

import grademanager.dao.UserDAO;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.stage.Stage;
import grademanager.model.User;

public class LoginController {

    @FXML
    private TextField usernameField;

    @FXML
    private PasswordField passwordField;

    @FXML
    private Label errorLabel;

    private UserDAO userDAO = new UserDAO();

    @FXML
    private void handleLoginButtonAction() {
        String username = usernameField.getText();
        String password = passwordField.getText();

        if (username.isEmpty() || password.isEmpty()) {
            errorLabel.setText("Vui lòng nhập đầy đủ thông tin!");
            return;
        }

        User user = userDAO.login(username, password);

        if (user != null) {
            try {
                FXMLLoader loader;
                Parent root;

                if ("admin".equalsIgnoreCase(user.getRole())) {
                    loader = new FXMLLoader(getClass().getResource("/grademanager/view/AdminDashboardView.fxml"));
                } else if ("teacher".equalsIgnoreCase(user.getRole())) {
                    loader = new FXMLLoader(getClass().getResource("/grademanager/view/TeacherDashboardView.fxml"));
                } else {
                    errorLabel.setText("Không xác định được vai trò người dùng!");
                    return;
                }

                root = loader.load();
                Stage stage = (Stage) usernameField.getScene().getWindow();
                stage.setScene(new Scene(root));
                stage.show();

            } catch (IOException e) {
                e.printStackTrace();
                errorLabel.setText("Lỗi khi tải màn hình!");
            }
        } else {
            errorLabel.setText("Tên đăng nhập hoặc mật khẩu không đúng!");
        }
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\SchoolClassManagementController.java
----------------------------------------------------------------
package grademanager.controller;

import grademanager.dao.ClassroomDAO;
import grademanager.model.SchoolClass;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import grademanager.model.*;
import grademanager.dao.*;
import java.util.ArrayList;
import java.util.List;

public class SchoolClassManagementController {

    @FXML private TableView<SchoolClass> classTableView;
    @FXML private TableColumn<SchoolClass, Integer> idColumn;
    @FXML private TableColumn<SchoolClass, String> classNameColumn;
    @FXML private TableColumn<SchoolClass, String> academicYearColumn;
    @FXML private TableColumn<SchoolClass, String> teacherNameColumn;

    @FXML private TextField classNameField;
    @FXML private TextField academicYearField;
    @FXML private ComboBox<String> homeroomTeacherComboBox;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ClassroomDAO classroomDAO = new ClassroomDAO();
    private ObservableList<SchoolClass> classList = FXCollections.observableArrayList();
    private SchoolClass selectedClass;

    @FXML
    private void initialize() {
        // Gáº¯n dá»¯ liá»‡u cá»™t
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getClassId()).asObject());
        classNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getClassName()));
        academicYearColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getAcademicYear()));
        teacherNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("GV#" + cellData.getValue().getTeacherId()));

        // Load dá»¯ liá»‡u tá»« DB
        loadClasses();

        // TODO: thay báº±ng TeacherDAO.getAllNames() náº¿u cÃ³

        TeacherDAO teacherDAO = new TeacherDAO();
        List<Teacher> teachers = teacherDAO.getAll();
        List<String> name =  new ArrayList<>();
        for(Teacher t: teachers){
            name.add(t.getFullName());
        }
        homeroomTeacherComboBox.setItems(FXCollections.observableArrayList(name));

        // Láº¯ng nghe chá»n dÃ²ng trong báº£ng
        classTableView.getSelectionModel().selectedItemProperty().addListener((obs, oldSel, newSel) -> {
            if (newSel != null) {
                selectedClass = newSel;
                showClassDetails(newSel);
                updateButton.setDisable(false);
                deleteButton.setDisable(false);
            }
        });
    }

    private void loadClasses() {
        classList.setAll(classroomDAO.getAll());
        classTableView.setItems(classList);
    }

    private void showClassDetails(SchoolClass c) {
        classNameField.setText(c.getClassName());
        academicYearField.setText(c.getAcademicYear());
        homeroomTeacherComboBox.setValue("GV#" + c.getTeacherId());
    }

    @FXML
    private void handleAddButton() {
        SchoolClass c = new SchoolClass(
            0,
            classNameField.getText(),
            academicYearField.getText(),
            homeroomTeacherComboBox.getSelectionModel().getSelectedIndex() + 1 // giáº£ Ä‘á»‹nh ID GV
        );
        if (classroomDAO.insert(c)) {
            loadClasses();
            clearForm();
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedClass != null) {
            selectedClass.setClassName(classNameField.getText());
            selectedClass.setAcademicYear(academicYearField.getText());
            selectedClass.setTeacherId(homeroomTeacherComboBox.getSelectionModel().getSelectedIndex() + 1);
            if (classroomDAO.update(selectedClass)) {
                loadClasses();
                clearForm();
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedClass != null) {
            if (classroomDAO.delete(selectedClass.getClassId())) {
                loadClasses();
                clearForm();
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        classNameField.clear();
        academicYearField.clear();
        homeroomTeacherComboBox.getSelectionModel().clearSelection();
        selectedClass = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\StudentManagementController.java
----------------------------------------------------------------
package grademanager.controller;

import java.util.List;

import grademanager.dao.StudentDAO;
import grademanager.model.SchoolClass;
import grademanager.model.Student;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import grademanager.dao.ClassroomDAO;
public class StudentManagementController {

    @FXML private TableView<Student> studentTableView;
    @FXML private TableColumn<Student, Integer> idColumn;
    @FXML private TableColumn<Student, String> nameColumn;
    @FXML private TableColumn<Student, String> dobColumn;
    @FXML private TableColumn<Student, String> genderColumn;
    @FXML private TableColumn<Student, String> addressColumn;
    @FXML private TableColumn<Student, Integer> classColumn;

    @FXML private TextField nameField;
    @FXML private DatePicker dobPicker;
    @FXML private TextField addressField;
    @FXML private ComboBox<String> genderComboBox;
    @FXML private ComboBox<Integer> classComboBox;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ObservableList<Student> studentList = FXCollections.observableArrayList();
    private StudentDAO studentDAO = new StudentDAO();
    private Student selectedStudent;

    @FXML
    private void initialize() {
        // Gáº¯n dá»¯ liá»‡u cá»™t
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getStudentId()).asObject());
        nameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getFullName()));
        dobColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getDateOfBirth().toString()));
        genderColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getGender()));
        addressColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getAddress()));
        classColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getClassroom()).asObject());

        // Load dá»¯ liá»‡u tá»« DB
        studentList.addAll(studentDAO.getAll());
        studentTableView.setItems(studentList);

        // Gáº¯n dá»¯ liá»‡u cho comboBox
        genderComboBox.setItems(FXCollections.observableArrayList("Nam", "Ná»¯"));

        ClassroomDAO classroomDAO = new ClassroomDAO();
        List<SchoolClass> classes = classroomDAO.getAll();
        List<Integer> classIds = classes.stream()
                                        .map(SchoolClass::getClassId)
                                        .toList();
        classComboBox.setItems(FXCollections.observableArrayList(classIds));

        // Láº¯ng nghe chá»n dÃ²ng
        studentTableView.getSelectionModel().selectedItemProperty().addListener(
            (obs, oldSel, newSel) -> {
                if (newSel != null) {
                    selectedStudent = newSel;
                    showStudentDetails(newSel);
                    updateButton.setDisable(false);
                    deleteButton.setDisable(false);
                }
            });
    }

    private void showStudentDetails(Student student) {
        nameField.setText(student.getFullName());
        dobPicker.setValue(student.getDateOfBirth());
        genderComboBox.setValue(student.getGender());
        addressField.setText(student.getAddress());
        classComboBox.setValue(student.getClassroom());
    }

    @FXML
    private void handleAddButton() {
        Student student = new Student(
            0,
            nameField.getText(),
            dobPicker.getValue(),
            genderComboBox.getValue(),
            addressField.getText(),
            classComboBox.getValue()
        );
        if (studentDAO.insert(student)) {
            studentList.add(student);
            clearForm();
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedStudent != null) {
            selectedStudent.setFullName(nameField.getText());
            selectedStudent.setDateOfBirth(dobPicker.getValue());
            selectedStudent.setGender(genderComboBox.getValue());
            selectedStudent.setAddress(addressField.getText());
            selectedStudent.setClass(classComboBox.getValue());
            if (studentDAO.update(selectedStudent)) {
                studentTableView.refresh();
                clearForm();
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedStudent != null) {
            if (studentDAO.delete(selectedStudent.getStudentId())) {
                studentList.remove(selectedStudent);
                clearForm();
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        nameField.clear();
        dobPicker.setValue(null);
        genderComboBox.getSelectionModel().clearSelection();
        addressField.clear();
        classComboBox.getSelectionModel().clearSelection();
        selectedStudent = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\SubjectManagementController.java
----------------------------------------------------------------
package grademanager.controller;

import grademanager.dao.SubjectDAO;
import grademanager.model.Subject;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

public class SubjectManagementController {

    @FXML private TextField subjectNameField;
    @FXML private TableView<Subject> subjectTableView;
    @FXML private TableColumn<Subject, Integer> idColumn;
    @FXML private TableColumn<Subject, String> nameColumn;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private SubjectDAO subjectDAO = new SubjectDAO();
    private ObservableList<Subject> subjectList = FXCollections.observableArrayList();
    private Subject selectedSubject;

    @FXML
    private void initialize() {
        // Gáº¯n dá»¯ liá»‡u cá»™t
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getSubjectId()).asObject());
        nameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getSubjectName()));

        // Load dá»¯ liá»‡u tá»« DB
        loadSubjects();

        // Láº¯ng nghe chá»n dÃ²ng trong báº£ng
        subjectTableView.getSelectionModel().selectedItemProperty().addListener((obs, oldSel, newSel) -> {
            if (newSel != null) {
                selectedSubject = newSel;
                showSubjectDetails(newSel);
                updateButton.setDisable(false);
                deleteButton.setDisable(false);
            }
        });

        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    private void loadSubjects() {
        subjectList.setAll(subjectDAO.getAll());
        subjectTableView.setItems(subjectList);
    }

    private void showSubjectDetails(Subject s) {
        subjectNameField.setText(s.getSubjectName());
    }

    @FXML
    private void handleAddButton() {
        Subject s = new Subject(0, subjectNameField.getText());
        if (subjectDAO.insert(s)) {
            subjectList.add(s);
            clearForm();
        } else {
            showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ thÃªm mÃ´n há»c!");
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedSubject != null) {
            selectedSubject.setSubjectName(subjectNameField.getText());
            if (subjectDAO.update(selectedSubject)) {
                subjectTableView.refresh();
                clearForm();
            } else {
                showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ cáº­p nháº­t mÃ´n há»c!");
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedSubject != null) {
            if (subjectDAO.delete(selectedSubject.getSubjectId())) {
                subjectList.remove(selectedSubject);
                clearForm();
            } else {
                showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ xÃ³a mÃ´n há»c!");
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        subjectNameField.clear();
        selectedSubject = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    private void showAlert(Alert.AlertType type, String title, String message) {
        Alert alert = new Alert(type);
        alert.setTitle(title);
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\TeacherDashboardController.java
----------------------------------------------------------------
package grademanager.controller;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.layout.AnchorPane;
import javafx.scene.Parent;
import javafx.fxml.FXMLLoader;
import java.io.IOException;
import javafx.scene.control.Label;

public class TeacherDashboardController {

    @FXML private Label welcomeLabel;
    @FXML private Button gradeManagementButton;
    @FXML private Button logoutButton;
    @FXML private AnchorPane mainContentPane;

    @FXML
    private void handleGradeManagement() {
        // Má»Ÿ mÃ n hÃ¬nh nháº­p/xem Ä‘iá»ƒm
        loadView("/grademanager/view/GradeManagementView.fxml");
    }

    @FXML
    private void handleLogout() {
        // Quay láº¡i mÃ n hÃ¬nh Ä‘Äƒng nháº­p
        loadView("/grademanager/view/LoginScreen.fxml");
    }

    private void loadView(String fxmlPath) {
        try {
            Parent view = FXMLLoader.load(getClass().getResource(fxmlPath));
            mainContentPane.getChildren().setAll(view);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\controller\TeacherManagementController.java
----------------------------------------------------------------
package grademanager.controller;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

import grademanager.dao.TeacherDAO;
import grademanager.model.Teacher;

public class TeacherManagementController {

    @FXML private TableView<Teacher> teacherTableView;
    @FXML private TableColumn<Teacher, Integer> idColumn;
    @FXML private TableColumn<Teacher, String> fullNameColumn;
    @FXML private TableColumn<Teacher, String> usernameColumn;

    @FXML private TextField fullNameField;
    @FXML private TextField usernameField;
    @FXML private PasswordField passwordField;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ObservableList<Teacher> teacherList = FXCollections.observableArrayList();
    private TeacherDAO teacherDAO = new TeacherDAO();
    private Teacher selectedTeacher;

    @FXML
    private void initialize() {
        // Gáº¯n dá»¯ liá»‡u cá»™t vá»›i thuá»™c tÃ­nh trong lá»›p Teacher
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getUserId()).asObject());
        fullNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getFullName()));
        usernameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getUserName()));

        // Load dá»¯ liá»‡u tá»« DB
        teacherList.addAll(teacherDAO.getAll());
        teacherTableView.setItems(teacherList);

        // Láº¯ng nghe chá»n dÃ²ng trong báº£ng
        teacherTableView.getSelectionModel().selectedItemProperty().addListener((obs, oldSel, newSel) -> {
            if (newSel != null) {
                selectedTeacher = newSel;
                showTeacherDetails(newSel);
                updateButton.setDisable(false);
                deleteButton.setDisable(false);
            }
        });

        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    private void showTeacherDetails(Teacher teacher) {
        fullNameField.setText(teacher.getFullName());
        usernameField.setText(teacher.getUserName());
        passwordField.setText(teacher.getPassWord());
    }

    @FXML
    private void handleAddButton() {
        Teacher teacher = new Teacher(
            0,
            usernameField.getText(),
            passwordField.getText(),
            fullNameField.getText()
        );
        if (teacherDAO.insert(teacher)) {
            teacherList.add(teacher);
            showAlert(Alert.AlertType.INFORMATION, "ThÃ nh cÃ´ng", "ThÃªm giÃ¡o viÃªn thÃ nh cÃ´ng!");
            clearForm();
        } else {
            showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ thÃªm giÃ¡o viÃªn!");
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedTeacher != null) {
            selectedTeacher.setFullName(fullNameField.getText());
            selectedTeacher.setUserName(usernameField.getText());
            selectedTeacher.setPassWord(passwordField.getText());
            if (teacherDAO.update(selectedTeacher)) {
                teacherTableView.refresh();
                showAlert(Alert.AlertType.INFORMATION, "ThÃ nh cÃ´ng", "Cáº­p nháº­t giÃ¡o viÃªn thÃ nh cÃ´ng!");
                clearForm();
            } else {
                showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ cáº­p nháº­t giÃ¡o viÃªn!");
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedTeacher != null) {
            if (teacherDAO.delete(selectedTeacher.getUserId())) {
                teacherList.remove(selectedTeacher);
                showAlert(Alert.AlertType.INFORMATION, "ThÃ nh cÃ´ng", "XÃ³a giÃ¡o viÃªn thÃ nh cÃ´ng!");
                clearForm();
            } else {
                showAlert(Alert.AlertType.ERROR, "Lá»—i", "KhÃ´ng thá»ƒ xÃ³a giÃ¡o viÃªn!");
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        fullNameField.clear();
        usernameField.clear();
        passwordField.clear();
        selectedTeacher = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    private void showAlert(Alert.AlertType type, String title, String message) {
        Alert alert = new Alert(type);
        alert.setTitle(title);
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\AssignmentDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.Assignment;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class AssignmentDAO implements DAO<Assignment>{
    @Override
    public boolean insert(Assignment a) {
        String sql = "INSERT INTO Assignments(teacher_id, class_id, subject_id) VALUES (?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setInt(1, a.getTeacherId());
            pstmt.setInt(2, a.getClassId());
            pstmt.setInt(3, a.getSubjectId());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) a.setAssignmentId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }

    @Override
    public boolean update(Assignment as){
        String sql = "UPDATE Assignments SET teacher_id = ?, class_id = ?, subject_id = ? WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            
            pstmt.setInt(1, as.getTeacherId());
            pstmt.setInt(2, as.getClassId());
            pstmt.setInt(3, as.getSubjectId());
            pstmt.setInt(4, as.getAssignmentId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean delete(int id){
        String sql = "DELETE FROM Assignments WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    @Override
    public Assignment getById(int id){
        String sql = "SELECT * FROM Assignments WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Assignment(rs.getInt("assignment_id"), rs.getInt("teacher_id"), rs.getInt("class_id"), rs.getInt("subject_id"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<Assignment> getAll(){
        List<Assignment> as = new ArrayList<>();
        String sql = "SELECT * FROM Assignments";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                as.add(new Assignment(rs.getInt("assignment_id"), rs.getInt("teacher_id"), rs.getInt("class_id"), rs.getInt("subject_id")));
            }
            return as;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return as;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\ClassroomDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.SchoolClass;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;


public class ClassroomDAO implements DAO<SchoolClass>{
    @Override
    public boolean insert(SchoolClass c) {
        String sql = "INSERT INTO Classes(class_name, academic_year, homeroom_teacher_id) VALUES (?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setString(1, c.getClassName());
            pstmt.setString(2, c.getAcademicYear());
            pstmt.setInt(3, c.getTeacherId());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) c.setClassId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }

    @Override
    public boolean update(SchoolClass c){
        String sql = "UPDATE Classes SET class_name = ?, academic_year = ?, homeroom_teacher_id = ? WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(4, c.getClassId());
            pstmt.setString(1, c.getClassName());
            pstmt.setString(2, c.getAcademicYear());
            pstmt.setInt(3, c.getTeacherId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean delete(int id){
        String sql = "DELETE FROM Classes WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    @Override
    public SchoolClass getById(int id){
        String sql = "SELECT * FROM Classes WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new SchoolClass(rs.getInt("class_id"), rs.getString("class_name"), rs.getString("academic_year"), rs.getInt("homeroom_teacher_id"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<SchoolClass> getAll(){
        List<SchoolClass> list = new ArrayList<>();
        String sql = "SELECT * FROM Classes";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                list.add(new SchoolClass(rs.getInt("class_id"), rs.getString("class_name"), rs.getString("academic_year"), rs.getInt("homeroom_teacher_id")));
            }
            return list;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
            return list;
        }
    }

}

----------------------------------------------------------------
// FILE: src\grademanager\dao\DAO.java
----------------------------------------------------------------
package grademanager.dao;

import java.util.List;

public interface DAO<T> {
    boolean insert(T t);
    boolean update(T t);
    boolean delete(int id);
    T getById(int id);
    List<T> getAll();
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\GradeDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.Grade;
import grademanager.util.DatabaseConnector;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class GradeDAO implements DAO<Grade> {

    // Lấy tất cả điểm
    @Override
    public List<Grade> getAll() {
        List<Grade> grades = new ArrayList<>();
        String sql = "SELECT * FROM Grades";
        try (Connection conn = DatabaseConnector.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(sql)) {
            while (rs.next()) {
                grades.add(mapResultSetToGrade(rs));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return grades;
    }

    // Lấy tất cả điểm của một học sinh theo một môn
    public List<Grade> getGradesByStudentAndSubject(int studentId, int subjectId) {
        List<Grade> grades = new ArrayList<>();
        String sql = "SELECT * FROM Grades WHERE student_id=? AND subject_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, studentId);
            pstmt.setInt(2, subjectId);
            ResultSet rs = pstmt.executeQuery();
            while (rs.next()) {
                grades.add(new Grade(
                    rs.getInt("grade_id"),
                    rs.getInt("student_id"),
                    rs.getInt("subject_id"),
                    rs.getString("grade_type"),
                    rs.getDouble("score")
                ));
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return grades;
    }

    // Thêm điểm
    @Override
    public boolean insert(Grade g) {
        String sql = "INSERT INTO Grades(student_id, subject_id, grade_type, score) VALUES (?,?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setInt(1, g.getStudent());
            pstmt.setInt(2, g.getSubject());
            pstmt.setString(3, g.getGradeType());
            pstmt.setDouble(4, g.getScore());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) g.setGradeId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }

    // Cập nhật điểm
    @Override
    public boolean update(Grade g) {
        String sql = "UPDATE Grades SET score=? WHERE grade_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setDouble(1, g.getScore());
            pstmt.setInt(2, g.getGradeId());
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            e.printStackTrace();
            return false;
        }
    }

    // Xóa điểm
    @Override
    public boolean delete(int gradeId) {
        String sql = "DELETE FROM Grades WHERE grade_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, gradeId);
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            e.printStackTrace();
            return false;
        }
    }

    // Tính điểm trung bình môn (theo trọng số)
    public double getWeightedAverageBySubject(int studentId, int subjectId) {
        double midterm = 0, finalExam = 0, assignmentAvg = 0;
        int assignmentCount = 0;

        String sql = "SELECT grade_type, score FROM Grades WHERE student_id=? AND subject_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, studentId);
            pstmt.setInt(2, subjectId);
            ResultSet rs = pstmt.executeQuery();
            while (rs.next()) {
                String type = rs.getString("grade_type").toLowerCase();
                double score = rs.getDouble("score");
                switch (type) {
                    case "midterm": midterm = score; break;
                    case "final": finalExam = score; break;
                    case "assignment": assignmentAvg += score; assignmentCount++; break;
                }
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }

        if (assignmentCount > 0) assignmentAvg /= assignmentCount;
        return (midterm * 2 + finalExam * 3 + assignmentAvg) / 6;
    }

    // Tính GPA (trung bình tất cả môn)
    public double getOverallAverage(int studentId) {
        double total = 0;
        int count = 0;
        String sql = "SELECT subject_id FROM Grades WHERE student_id=? GROUP BY subject_id";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, studentId);
            ResultSet rs = pstmt.executeQuery();
            while (rs.next()) {
                int subjectId = rs.getInt("subject_id");
                total += getWeightedAverageBySubject(studentId, subjectId);
                count++;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return count > 0 ? total / count : 0;
    }

    // Hàm tiện ích chuyển ResultSet thành Grade
    private Grade mapResultSetToGrade(ResultSet rs) throws SQLException {
        return new Grade(
            rs.getInt("grade_id"),
            rs.getInt("student_id"),
            rs.getInt("subject_id"),
            rs.getString("grade_type"),
            rs.getDouble("score")
        );
    }

    @Override
    public Grade getById(int id) {
        // TODO Auto-generated method stub
        throw new UnsupportedOperationException("Unimplemented method 'getById'");
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\StudentDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.Student;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class StudentDAO implements DAO<Student> {
    @Override
    public boolean insert(Student s) {
        String sql = "INSERT INTO Students(full_name, date_of_birth, gender, address, class_id) VALUES (?,?,?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setString(1, s.getFullName());
            pstmt.setDate(2, Date.valueOf(s.getDateOfBirth()));
            pstmt.setString(3, s.getGender());
            pstmt.setString(4, s.getAddress());
            pstmt.setInt(5, s.getClassroom());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) s.setStudentId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }

    @Override
    public boolean update(Student s) {

        String sql = "UPDATE Students SET full_name = ?, date_of_birth = ?, gender = ?, address = ?, class_id = ? WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(6, s.getStudentId());
            pstmt.setString(1, s.getFullName());
            pstmt.setDate(2, Date.valueOf(s.getDateOfBirth()));
            pstmt.setString(3, s.getGender());
            pstmt.setString(4, s.getAddress());
            pstmt.setInt(5, s.getClassroom());
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi sua hoc sinh: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean delete(int id) {

        String sql = "DELETE FROM Students WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, id);
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi xoa hoc sinh: " + e.getMessage());
            return false;
        }
    }

    @Override
    public Student getById(int id) {

        String sql = "SELECT * FROM Students WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if (rs.next()) {
                return new Student(rs.getInt("student_id"), rs.getString("full_name"), rs.getDate("date_of_birth").toLocalDate(), rs.getString("gender"), rs.getString("address"), rs.getInt("class_id"));
            }
        } catch (SQLException e) {
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<Student> getAll() {
        List<Student> list = new ArrayList<>();

        String sql = "SELECT * FROM Students";

        try (Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)) {
            while (rs.next()) {
                list.add(new Student(rs.getInt("student_id"), rs.getString("full_name"), rs.getDate("date_of_birth").toLocalDate(), rs.getString("gender"), rs.getString("address"), rs.getInt("class_id")));
            }
            return list;
        } catch (SQLException e) {
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return list;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\SubjectDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.Subject;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class SubjectDAO implements DAO<Subject>{
    @Override
    public boolean insert(Subject s) {
        String sql = "INSERT INTO Subjects(subject_name) VALUES (?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setString(1, s.getSubjectName());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) s.setSubjectId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }

    @Override
    public boolean update(Subject s){
        String sql = "UPDATE Subjects SET subject_name = ? WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(2, s.getSubjectId());
            pstmt.setString(1, s.getSubjectName());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean delete(int id){
        String sql = "DELETE FROM Subjects WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    @Override
    public Subject getById(int id){
        String sql = "SELECT * FROM Subjects WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Subject(rs.getInt("subject_id"), rs.getString("subject_name"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<Subject> getAll(){
        List<Subject> s = new ArrayList<>();
        String sql = "SELECT * FROM Subjects";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                s.add(new Subject(rs.getInt("subject_id"), rs.getString("subject_name")));
            }
            return s;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return s;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\TeacherDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.Teacher;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class TeacherDAO implements DAO<Teacher> {
    @Override
    public boolean insert(Teacher t) {
        String sql = "INSERT INTO Users(username, password, full_name, role) VALUES (?,?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setString(1, t.getUserName());
            pstmt.setString(2, t.getPassWord());
            pstmt.setString(3, t.getFullName());
            pstmt.setString(4, t.getRole());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) t.setUserId(rs.getInt(1));
                return true;
            }
        } catch (SQLException e) { e.printStackTrace(); }
        return false;
    }



    public boolean update(Teacher t){
        String sql = "UPDATE Users SET username = ?, password = ?, full_name = ?, role = ? WHERE user_id = ?";

        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(5, t.getUserId());
            pstmt.setString(1, t.getUserName());
            pstmt.setString(2, t.getPassWord());
            pstmt.setString(3, t.getFullName());
            pstmt.setString(4, "TEACHER");

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua giao vien: " + e.getMessage());
            return false;
        }
    }

    public boolean delete(int id){

        String sql = "DELETE FROM Users WHERE user_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa giao vien: " + e.getMessage());
            return false;
        }
    }

    public Teacher getById(int id){
        String sql = "SELECT * FROM Users WHERE user_id = ?";

        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){

            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Teacher(id, rs.getString("username"), rs.getString("password"), rs.getString("full_name"));
            }
        }catch(SQLException e){
            System.out.println("loi khi lay tim kiem giao vien: " + e.getMessage());
        }
        return null;
    }


    public List<Teacher> getAll(){
        List<Teacher> list = new ArrayList<>();
        String sql = "SELECT * FROM Users WHERE role = 'TEACHER'";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                list.add(new Teacher(rs.getInt("user_id"), rs.getString("username"), rs.getString("password"), rs.getString("full_name")));
            }

            return list;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return list;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\dao\UserDAO.java
----------------------------------------------------------------
package grademanager.dao;

import grademanager.model.User;
import grademanager.util.DatabaseConnector;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class UserDAO implements DAO<User> {

    @Override
    public boolean insert(User u) {
        String sql = "INSERT INTO Users(username, password, full_name, role) VALUES (?,?,?,?)";
        try (Connection conn = DatabaseConnector.getConnection();
            PreparedStatement pstmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            pstmt.setString(1, u.getUserName());
            pstmt.setString(2, u.getPassWord());
            pstmt.setString(3, u.getFullName());
            pstmt.setString(4, u.getRole());

            int affected = pstmt.executeUpdate();
            if (affected > 0) {
                ResultSet rs = pstmt.getGeneratedKeys();
                if (rs.next()) {
                    u.setUserId(rs.getInt(1)); // cập nhật lại ID vừa sinh
                }
                return true;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return false;
    }

    @Override
    public boolean update(User user) {
        String sql = "UPDATE Users SET username=?, password=?, full_name=?, role=? WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setString(1, user.getUserName());
            stmt.setString(2, user.getPassWord());
            stmt.setString(3, user.getFullName());
            stmt.setString(4, user.getRole());
            stmt.setInt(5, user.getUserId());

            return stmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi sua nguoi dung: " + e.getMessage());
        }
        return false;
    }

    @Override
    public boolean delete(int id) {
        String sql = "DELETE FROM Users WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setInt(1, id);
            return stmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi xoa nguoi dung: " + e.getMessage());
        }
        return false;
    }

    @Override
    public User getById(int id) {
        String sql = "SELECT * FROM Users WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setInt(1, id);
            ResultSet rs = stmt.executeQuery();
            if (rs.next()) {
                return new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("full_name"),
                    rs.getString("role")
                );
            }
        } catch (SQLException e) {
            System.out.println("loi khi tim kiem nguoi dung: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<User> getAll() {
        List<User> users = new ArrayList<>();
        String sql = "SELECT * FROM Users";
        try (Connection conn = DatabaseConnector.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(sql)) {

            while (rs.next()) {
                users.add(new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("user_name"),
                    rs.getString("role")
                ));
            }
        } catch (SQLException e) {
            System.out.println("loi khi lay thong tin nguoi dung: " + e.getMessage());
        }
        return users;
    }

    // Hàm tiện ích cho đăng nhập
    public User login(String username, String password) {
        String sql = "SELECT * FROM Users WHERE username=? AND password=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setString(1, username);
            stmt.setString(2, password);
            ResultSet rs = stmt.executeQuery();

            if (rs.next()) {
                return new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("full_name"),
                    rs.getString("role")
                );
            }
        } catch (SQLException e) {
            System.out.println("loi khi dang nhap: " + e.getMessage());
        }
        return null;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\Admin.java
----------------------------------------------------------------
package grademanager.model;

public class Admin extends User{
    public Admin(){
        super();
        setRole("ADMIN");
    }

    public Admin(int userId, String username, String password, String fullName){
        super(userId, username, password, fullName, "ADMIN");
    }

    @Override
    public String toString(){
        return "Admin: " + getFullName() + "(" + getUserName() + ")";
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\Assignment.java
----------------------------------------------------------------
package grademanager.model;

public class Assignment{
    private int assignmentId;
    private int teacherId;
    private int classId;
    private int subjectId;

    public Assignment() {}

    public Assignment(int assignmentId, int teacherId, int classId, int subjectId){
        this.assignmentId = assignmentId;
        this.teacherId = teacherId;
        this.classId = classId;
        this.subjectId = subjectId;
    }

    public void setAssignmentId(int assignmentId){ this.assignmentId = assignmentId;}
    public int getAssignmentId(){ return assignmentId;}

    public void setTeacherId(int teacherId) { this.teacherId = teacherId; }
    public int getTeacherId() { return teacherId; }

    public void setClassId(int classId) { this.classId = classId; }
    public int getClassId() { return classId; }

    public void setSubjectId(int subjectId) { this.subjectId = subjectId; }
    public int getSubjectId() { return subjectId; }

    @Override
    public String toString(){
        return "Assignment{ID: " + assignmentId +
        ", TeacherId: " + teacherId +
        ", Class: " + classId +
        ", SubjectId: " + subjectId +
        "}";
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\Grade.java
----------------------------------------------------------------
package grademanager.model;



public class Grade{
    private int gradeId;
    private int studentId;
    private int subjectId;
    private String gradeType;
    private double score;

    public Grade(){}

    public Grade(int gradeId, int studentId, int subjectId, String gradeType, double score){
        this.gradeId = gradeId;
        this.studentId = studentId;
        this.subjectId = subjectId;
        this.gradeType = gradeType;
        this.score = score;
    }

    public void setGradeId(int gradeId){ this.gradeId = gradeId;}
    public int getGradeId(){ return gradeId;}

    public void setStudent(int s){ this.studentId = s;}
    public int getStudent(){ return studentId;}

    public void setSubject(int subjectId){ this.subjectId = subjectId;}
    public int getSubject(){ return subjectId;}

    public void setGradeType(String gradeType){ this.gradeType = gradeType;}
    public String getGradeType(){ return gradeType;}

    public void setScore(double score){ this.score = score;}
    public double getScore(){ return score;}

    
}

----------------------------------------------------------------
// FILE: src\grademanager\model\SchoolClass.java
----------------------------------------------------------------
package grademanager.model;

import java.util.ArrayList;
import java.util.List;

public class SchoolClass{
    private int classId;
    private String className;
    private String academicYear;
    private int teacherId;

    private List<Student> student = new ArrayList<>();

    public SchoolClass(){}

    public SchoolClass(int classId, String className, String academicYear, int teacherId){
        this.classId = classId;
        this.className = className;
        this.academicYear = academicYear;
        this.teacherId = teacherId;
    }

    public void setClassId(int classId){ this.classId = classId;}
    public int getClassId(){ return classId;}

    public void setClassName(String className){ this.className = className;}
    public String getClassName(){ return className;}

    public void setAcademicYear(String academicYear){ this.academicYear = academicYear;}
    public String getAcademicYear(){ return academicYear;}

    public void setTeacherId(int teacherId){ this.teacherId = teacherId;}
    public int getTeacherId(){ return teacherId;}

    public List<Student> getStudent(){ return student;}
    public void addStudent(Student s){ student.add(s);}

    @Override
    public String toString(){
        return "Class: " + className + "(" + academicYear + ")";
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\Student.java
----------------------------------------------------------------
package grademanager.model;

import java.time.LocalDate;

public class Student{
   private int studentId;
   private String fullName;
   private LocalDate dateOfBirth;
   private String gender;
   private String address;
   private int classId;

   public Student(){}

   public Student(int studentId, String fullName, LocalDate dateOfBirth, String gender, String address, int classId){
    this.fullName = fullName;
    this.dateOfBirth = dateOfBirth;
    this.gender = gender;
    this.address = address;
    this.classId = classId;
    this.studentId = studentId;
   }

   public void setStudentId(int studentId){
      this.studentId = studentId;
   }

   public void setFullName(String fullName){
    this.fullName = fullName;
   }

   public void setDateOfBirth(LocalDate dateOfBirth){
    this.dateOfBirth = dateOfBirth;
   }

   public void setGender(String gender){
    this.gender = gender;
   }

   public void setAddress(String address){
    this.address = address;
   }

   public void setClass(int classId){
    this.classId = classId;
   }

   public int getStudentId(){
      return studentId;
   }

   public String getFullName(){
    return fullName;
   } 

   public LocalDate getDateOfBirth(){
    return dateOfBirth;
   }

   public String getGender(){
    return gender;
   }

   public String getAddress(){
    return address;
   }
   
   public int getClassroom(){
    return classId;
   }

   @Override
   public String toString(){
      return "(" + studentId + ", " + fullName + ", " + dateOfBirth + ", " + gender + ", " + address + ", " + classId + ")";
   }
} 

----------------------------------------------------------------
// FILE: src\grademanager\model\Subject.java
----------------------------------------------------------------
package grademanager.model;

public class Subject{
    private int subjectId;
    private String subjectName;

    public Subject(){}

    public Subject(int subjectId, String subjectName){
        this.subjectId = subjectId;
        this.subjectName = subjectName;
    }

    public void setSubjectId(int subjectId){ this.subjectId = subjectId;}
    public int getSubjectId(){ return subjectId;}

    public void setSubjectName(String subjectName){ this.subjectName = subjectName;}
    public String getSubjectName(){ return subjectName;}

    @Override
    public String toString(){
        return "Subject: " + subjectName;
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\Teacher.java
----------------------------------------------------------------
package grademanager.model;

import java.util.ArrayList;
import java.util.List;



public class Teacher extends User{
    private List<Assignment> as = new ArrayList<>();

    public Teacher(){
        super();
        setRole("TEACHER");
    }

    public Teacher(int userId, String userName, String passWord, String fullName){
        super(userId, userName, passWord, fullName, "TEACHER");
    }

    public void addAssigmment(Assignment assigmment){
        as.add(assigmment);
    }

    public List<Assignment> getAssigmment(){
        return as;
    }

    @Override 
    public String toString(){
        return "Teacher: " + getFullName() + "(" + getUserName() + ")" + ", teaches " + as.size() + " classes"; 
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\model\User.java
----------------------------------------------------------------
package grademanager.model;

public class User{
    private int userId;
    private String userName;
    private String passWord;
    private String fullName;
    private String role;

    public User(){}

    public User(int userId, String userName, String passWord, String fullName, String role){
        this.userId = userId;
        this.userName = userName;
        this.passWord = passWord;
        this.fullName = fullName;
        this.role = role;
    }

    public void setUserId(int userId){ this.userId = userId;}
    public int getUserId(){ return userId;}

    public void setUserName(String userName){ this.userName = userName;}
    public String getUserName(){ return userName;}

    public void setPassWord(String passWord){ this.passWord = passWord;}
    public String getPassWord(){ return passWord;}

    public void setFullName(String fullName){ this.fullName = fullName;}
    public String getFullName(){ return fullName;}

    public void setRole(String role ){ this.role = role;}
    public String getRole(){ return role;}
}

----------------------------------------------------------------
// FILE: src\grademanager\util\DatabaseConnector.java
----------------------------------------------------------------
package grademanager.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DatabaseConnector {
    private static final String URL = "jdbc:sqlite:database/quanlydiem.db";
    

    private DatabaseConnector() {}

    public static Connection getConnection() {
    
        try {
            Class.forName("org.sqlite.JDBC"); // báº¯t buá»™c Ä‘á»ƒ load driver
            Connection conn = DriverManager.getConnection(URL);
            if (conn != null && !conn.isClosed()){
                System.out.println("thanh cong");    
            }
            return conn;
        } catch (ClassNotFoundException e) {
            System.out.println("khong tim thay driver: " + e.getMessage());
        } catch (SQLException e) {
            System.out.println(" loi ket noi: " + e.getMessage());
        }
        return null;
    }

    public static void main(String[] args) {
        getConnection();
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\view\AdminDashboardView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AdminDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="ADMIN PANEL">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="studentManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleStudentManagement" text="Quáº£n lÃ½ Sinh viÃªn" />
            <Button fx:id="teacherManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleTeacherManagement" text="Quáº£n lÃ½ GiÃ¡o viÃªn" />
            <Button fx:id="classManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleClassManagement" text="Quáº£n lÃ½ Lá»›p há»c" />
            <Button fx:id="subjectManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleSubjectManagement" text="Quáº£n lÃ½ MÃ´n há»c" />
            <Button fx:id="assignmentButton" maxWidth="1.7976931348623157E308" onAction="#handleAssignment" text="PhÃ¢n cÃ´ng Giáº£ng dáº¡y" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="ÄÄƒng xuáº¥t" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="ChÃ o má»«ng Ä‘áº¿n vá»›i Há»‡ thá»‘ng Quáº£n lÃ½!" AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\AssignmentView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="500.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AssignmentController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="PHÃ‚N CÃ”NG GIáº¢NG Dáº Y">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="GiÃ¡o viÃªn:" />
                  <ComboBox fx:id="teacherComboBox" prefWidth="150.0" />
                  <Label text="Lá»›p há»c:" />
                  <ComboBox fx:id="classComboBox" prefWidth="150.0" />
                  <Label text="MÃ´n há»c:" />
                  <ComboBox fx:id="subjectComboBox" prefWidth="150.0" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" onAction="#handleAddButton" prefWidth="120.0" text="ThÃªm PhÃ¢n cÃ´ng" />
                  <Button fx:id="deleteButton" onAction="#handleDeleteButton" prefWidth="120.0" text="XÃ³a PhÃ¢n cÃ´ng" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sÃ¡ch PhÃ¢n cÃ´ng">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="assignmentTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="teacherNameColumn" prefWidth="200.0" text="GiÃ¡o viÃªn" />
                  <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="Lá»›p há»c" />
                  <TableColumn fx:id="subjectNameColumn" prefWidth="200.0" text="MÃ´n há»c" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\GradeManagementView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="650.0" prefWidth="850.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.GradeManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="NHáº¬P/XEM ÄIá»‚M">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Há»c sinh:" />
                  <ComboBox fx:id="studentComboBox" prefWidth="150.0" promptText="Chá»n ID HS" />
                  
                  <Label text="MÃ´n:" />
                  <ComboBox fx:id="subjectComboBox" prefWidth="150.0" promptText="Chá»n MÃ´n" />
                  
                  <Button fx:id="loadButton" onAction="#handleLoadGrades" text="Táº£i Ä‘iá»ƒm" />
                  
                  <Separator orientation="VERTICAL" />
                  
                  <Button fx:id="saveButton" onAction="#handleSaveChanges" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="LÆ°u Thay Ä‘á»•i" />
               </children>
            </HBox>

            <TableView fx:id="gradeTableView" editable="true" VBox.vgrow="ALWAYS">
              <columns>
                <TableColumn fx:id="gradeIdColumn" prefWidth="50.0" text="ID" />
                
                <TableColumn fx:id="studentIdColumn" editable="false" prefWidth="80.0" text="MÃ£ HS" />
                
                <TableColumn fx:id="subjectIdColumn" editable="false" prefWidth="80.0" text="MÃ£ MÃ´n" />
                
                <TableColumn fx:id="gradeTypeColumn" prefWidth="150.0" text="Loáº¡i Äiá»ƒm" />
                
                <TableColumn fx:id="scoreColumn" prefWidth="100.0" text="Äiá»ƒm Sá»‘" />
              </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>

            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-border-color: #dddddd; -fx-padding: 10; -fx-background-color: #f9f9f9;">
               <children>
                  <Label text="CÃ´ng cá»¥:">
                     <font><Font name="System Bold" size="12.0" /></font>
                  </Label>
                  
                  <Separator orientation="VERTICAL" />
                  
                  <Button fx:id="avgButton" onAction="#handleCalculateAverage" text="TÃ­nh TB MÃ´n" />
                  <Label fx:id="avgLabel" text="..." textFill="#2196f3">
                     <font><Font name="System Bold" size="13.0" /></font>
                  </Label>
                  
                  <Separator orientation="VERTICAL" />
                  
                  <Button fx:id="gpaButton" onAction="#handleCalculateGPA" text="TÃ­nh GPA Tá»•ng" />
                  <Label fx:id="gpaLabel" text="..." textFill="#ff5722">
                     <font><Font name="System Bold" size="13.0" /></font>
                  </Label>
               </children>
            </HBox>

         </children>
      </VBox>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\LoginScreen.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox alignment="CENTER" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="300.0" prefWidth="400.0" spacing="15.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.LoginController">
   <children>
      <Label text="ÄÄ‚NG NHáº¬P Há»† THá»NG">
         <font>
            <Font name="System Bold" size="20.0" />
         </font>
      </Label>
      <TextField fx:id="usernameField" promptText="TÃªn Ä‘Äƒng nháº­p" />
      <PasswordField fx:id="passwordField" promptText="Máº­t kháº©u" />
      <Button fx:id="loginButton" mnemonicParsing="false" onAction="#handleLoginButtonAction" prefWidth="100.0" text="ÄÄƒng nháº­p" />
      <Label fx:id="errorLabel" textFill="RED" />
   </children>
   <padding>
      <Insets bottom="20.0" left="40.0" right="40.0" top="20.0" />
   </padding>
</VBox>

----------------------------------------------------------------
// FILE: src\grademanager\view\SchoolClassManagementView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SchoolClassManagementController">
   <children>
      <TableView fx:id="classTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="TÃªn Lá»›p" />
            <TableColumn fx:id="academicYearColumn" prefWidth="150.0" text="NÄƒm há»c" />
            <TableColumn fx:id="teacherNameColumn" prefWidth="250.0" text="GV Chá»§ nhiá»‡m" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUáº¢N LÃ Lá»šP Há»ŒC"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="TÃªn Lá»›p:" />
                  <TextField fx:id="classNameField" GridPane.columnIndex="1" />
                  <Label text="NÄƒm há»c:" GridPane.rowIndex="1" />
                  <TextField fx:id="academicYearField" promptText="VÃ­ dá»¥: 2024-2025" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="GV Chá»§ nhiá»‡m:" GridPane.rowIndex="2" />
                  <ComboBox fx:id="homeroomTeacherComboBox" prefWidth="300.0" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="ThÃªm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="LÆ°u" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="XÃ³a" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Má»›i" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="212.0" text="Danh sÃ¡ch Lá»›p há»c">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\StudentManagementView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.StudentManagementController">
   <children>
      <TableView fx:id="studentTableView" layoutX="14.0" layoutY="270.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="270.0">
        <columns>
          <TableColumn fx:id="idColumn" prefWidth="50.0" text="ID" />
          <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Há» vÃ  TÃªn" />
          <TableColumn fx:id="dobColumn" prefWidth="100.0" text="NgÃ y sinh" />
          <TableColumn fx:id="genderColumn" prefWidth="75.0" text="Giá»›i tÃ­nh" />
          <TableColumn fx:id="addressColumn" prefWidth="200.0" text="Äá»‹a chá»‰" />
          <TableColumn fx:id="classColumn" prefWidth="75.0" text="Lá»›p" />
        </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUáº¢N LÃ SINH VIÃŠN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
              </rowConstraints>
               <children>
                  <Label text="Há» vÃ  TÃªn:" />
                  <TextField fx:id="nameField" GridPane.columnIndex="1" />
                  <Label text="NgÃ y sinh:" GridPane.rowIndex="1" />
                  <DatePicker fx:id="dobPicker" prefWidth="250.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Äá»‹a chá»‰:" GridPane.rowIndex="2" />
                  <TextField fx:id="addressField" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2" />
                  <Label text="Giá»›i tÃ­nh:" GridPane.columnIndex="2" />
                  <ComboBox fx:id="genderComboBox" prefWidth="250.0" GridPane.columnIndex="3" />
                  <Label text="Lá»›p há»c:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                  <ComboBox fx:id="classComboBox" prefWidth="250.0" GridPane.columnIndex="3" GridPane.rowIndex="1" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="ThÃªm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="LÆ°u" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="XÃ³a" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Má»›i" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="247.0" text="Danh sÃ¡ch Sinh viÃªn">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\SubjectManagementView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="400.0" prefWidth="500.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SubjectManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUáº¢N LÃ MÃ”N Há»ŒC">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="TÃªn MÃ´n há»c:" />
                  <TextField fx:id="subjectNameField" prefWidth="250.0" HBox.hgrow="ALWAYS" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="ThÃªm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="LÆ°u" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="XÃ³a" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Má»›i" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sÃ¡ch MÃ´n há»c">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="subjectTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
                  <TableColumn fx:id="nameColumn" prefWidth="350.0" text="TÃªn MÃ´n há»c" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\TeacherDashboardView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label fx:id="welcomeLabel" alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="TEACHER PANEL" wrapText="true">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="gradeManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleGradeManagement" text="Nháº­p/Xem Ä‘iá»ƒm" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="ÄÄƒng xuáº¥t" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="HÃ£y chá»n má»™t chá»©c nÄƒng tá»« thanh Ä‘iá»u hÆ°á»›ng bÃªn trÃ¡i." AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>

----------------------------------------------------------------
// FILE: src\grademanager\view\TeacherManagementView.fxml
----------------------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherManagementController">
   <children>
      <TableView fx:id="teacherTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="fullNameColumn" prefWidth="250.0" text="Há» vÃ  TÃªn" />
            <TableColumn fx:id="usernameColumn" prefWidth="200.0" text="TÃªn Ä‘Äƒng nháº­p" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUáº¢N LÃ GIÃO VIÃŠN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="Há» vÃ  TÃªn:" />
                  <TextField fx:id="fullNameField" GridPane.columnIndex="1" />
                  <Label text="TÃªn Ä‘Äƒng nháº­p:" GridPane.rowIndex="1" />
                  <TextField fx:id="usernameField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Máº­t kháº©u:" GridPane.rowIndex="2" />
                  <PasswordField fx:id="passwordField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="ThÃªm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="LÆ°u" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="XÃ³a" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Má»›i" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="14.0" layoutY="210.0" prefWidth="133.0" text="Danh sÃ¡ch GiÃ¡o viÃªn">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>

----------------------------------------------------------------
// FILE: src\grademanager\Launcher.java
----------------------------------------------------------------
package grademanager;

public class Launcher {
    public static void main(String[] args) {
        Main.main(args);
    }
}

----------------------------------------------------------------
// FILE: src\grademanager\Main.java
----------------------------------------------------------------
package grademanager; // Package gá»‘c

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.util.Objects;

public class Main extends Application {

    @Override
    public void start(Stage primaryStage) {
        try {
            // ÄÆ°á»ng dáº«n nÃ y cá»±c ká»³ quan trá»ng, nÃ³ pháº£i trá» Ä‘Ãºng tá»›i file FXML
            // Dá»±a trÃªn code cÅ© cá»§a báº¡n, Ä‘Æ°á»ng dáº«n cÃ³ váº» lÃ : /grademanager/view/LoginScreen.fxml
            Parent root = FXMLLoader.load(Objects.requireNonNull(getClass().getResource("/grademanager/view/LoginScreen.fxml")));
            
            Scene scene = new Scene(root);
            
            // Thiáº¿t láº­p tiÃªu Ä‘á» cá»­a sá»•
            primaryStage.setTitle("Há»‡ thá»‘ng Quáº£n lÃ½ Äiá»ƒm Há»c sinh");
            
            // KhÃ´ng cho phÃ©p thay Ä‘á»•i kÃ­ch thÆ°á»›c cá»­a sá»• login (tÃ¹y chá»n)
            primaryStage.setResizable(false);
            
            primaryStage.setScene(scene);
            primaryStage.show();
            
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("Lá»—i khÃ´ng tÃ¬m tháº¥y file FXML hoáº·c lá»—i code JavaFX: " + e.getMessage());
        }
    }

    public static void main(String[] args) {
        launch(args);
    }
}

----------------------------------------------------------------
// FILE: src\test\DatabaseResetTest.java
----------------------------------------------------------------
package test;

import grademanager.util.DatabaseConnector;
import java.sql.Connection;
import java.sql.Statement;

public class DatabaseResetTest {
    public static void main(String[] args) {
        try (Connection conn = DatabaseConnector.getConnection();
             Statement stmt = conn.createStatement()) {

            // XÃ³a dá»¯ liá»‡u trong cÃ¡c báº£ng
            stmt.executeUpdate("DELETE FROM Users");
            stmt.executeUpdate("DELETE FROM Classes");
            stmt.executeUpdate("DELETE FROM Students");
            stmt.executeUpdate("DELETE FROM Subjects");
            stmt.executeUpdate("DELETE FROM Grades");
            stmt.executeUpdate("DELETE FROM Assignments");

            // Reset láº¡i ID vá» 1 báº±ng cÃ¡ch xÃ³a sequence
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Users'");
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Classes'");
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Students'");
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Subjects'");
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Grades'");
            stmt.executeUpdate("DELETE FROM sqlite_sequence WHERE name='Assignments'");

            System.out.println("ÄÃ£ xÃ³a toÃ n bá»™ dá»¯ liá»‡u vÃ  reset ID vá» 1 thÃ nh cÃ´ng!");

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

----------------------------------------------------------------
// FILE: src\test\TestAssignmentDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.AssignmentDAO;
import grademanager.model.Assignment;

public class TestAssignmentDAO {
    public static void main(String[] args) {
        AssignmentDAO dao = new AssignmentDAO();

        // 1. ThÃªm má»›i Assignment
        Assignment a1 = new Assignment(1, 101, 201, 301); // giáº£ Ä‘á»‹nh ID
        boolean inserted = dao.insert(a1);
        System.out.println("Insert: " + inserted);

    }
}

----------------------------------------------------------------
// FILE: src\test\TestClassroomDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.ClassroomDAO;
import grademanager.model.SchoolClass;

public class TestClassroomDAO {
    public static void main(String[] args) {
        ClassroomDAO dao = new ClassroomDAO();

        // ThÃªm lá»›p má»›i vá»›i teacher_id Ä‘Ã£ tá»“n táº¡i trong DB
        SchoolClass c1 = new SchoolClass(0, "10A", "2024-2025", 1);
        if (dao.insert(c1)) {
            System.out.println("ThÃªm lá»›p: " + c1.getClassName() + " (ID=" + c1.getClassId() + ")");
        } else {
            System.out.println("ThÃªm lá»›p 10A tháº¥t báº¡i!");
        }

        SchoolClass c2 = new SchoolClass(0, "10B", "2024-2025", 2);
        if (dao.insert(c2)) {
            System.out.println("ThÃªm lá»›p: " + c2.getClassName() + " (ID=" + c2.getClassId() + ")");
        } else {
            System.out.println("ThÃªm lá»›p 10B tháº¥t báº¡i!");
        }

        SchoolClass c3 = new SchoolClass(0, "10C", "2024-2025", 3);
        if (dao.insert(c3)) {
            System.out.println("ThÃªm lá»›p: " + c3.getClassName() + " (ID=" + c3.getClassId() + ")");
        } else {
            System.out.println("ThÃªm lá»›p 10C tháº¥t báº¡i!");
        }
    }
}

----------------------------------------------------------------
// FILE: src\test\TestGradeDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.GradeDAO;
import grademanager.model.Grade;

public class TestGradeDAO {
    public static void main(String[] args) {
        GradeDAO dao = new GradeDAO();

        // 1. ThÃªm má»›i Grade
        Grade g1 = new Grade(0, 1, 1, "midterm", 7.5);
        boolean inserted = dao.insert(g1);
        System.out.println("Insert: " + inserted);

        Grade g2 = new Grade(0, 1, 1, "final", 9.0);
        boolean inserted2 = dao.insert(g2);
        System.out.println("Insert: " + inserted2);

        Grade g3 = new Grade(0, 1, 1, "assignment", 8.0);
        boolean inserted3 = dao.insert(g3);
        System.out.println("Insert: " + inserted3);
        
    }
}

----------------------------------------------------------------
// FILE: src\test\TestSetup.java
----------------------------------------------------------------
package test;

import grademanager.dao.UserDAO;
import grademanager.model.User;

public class TestSetup {
    public static void main(String[] args) {
        UserDAO dao = new UserDAO();
        // Sá»¬A: Role pháº£i lÃ  "ADMIN" (viáº¿t hoa toÃ n bá»™) Ä‘á»ƒ khá»›p vá»›i rÃ ng buá»™c trong Database
        User admin = new User(0, "admin", "123", "Quáº£n Trá»‹ ViÃªn", "ADMIN");
        
        if(dao.insert(admin)) {
            System.out.println("ÄÃ£ táº¡o tÃ i khoáº£n Admin thÃ nh cÃ´ng!");
            System.out.println("User: admin | Pass: 123");
        } else {
            System.out.println("Táº¡o tháº¥t báº¡i.");
        }
    }
}

----------------------------------------------------------------
// FILE: src\test\TestStudentDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.StudentDAO;
import grademanager.model.Student;

import java.time.LocalDate;

public class TestStudentDAO {
    public static void main(String[] args) {
        StudentDAO dao = new StudentDAO();

        // 1. ThÃªm má»›i Student
        Student s1 = new Student(0, "Nguyen Truong Phuoc", LocalDate.of(2006, 4, 22), "Nam", "Hai Duong", 1);
        boolean inserted = dao.insert(s1);
        System.out.println("Insert: " + inserted);

        Student s2 = new Student(0, "Nguyen Duc Hoang Nam", LocalDate.of(2006, 12, 2), "Nam", "Ha Noi", 1);
        boolean inserted2 = dao.insert(s2);
        System.out.println("Insert: " + inserted2);

        Student s3 = new Student(0, "Huynh Quang Thinh", LocalDate.of(2006, 6, 20), "Nam", "Ha Noi", 1);
        boolean inserted3 = dao.insert(s3);
        System.out.println("Insert: " + inserted3);
    }
}

----------------------------------------------------------------
// FILE: src\test\TestSubjectDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.SubjectDAO;
import grademanager.model.Subject;
import java.util.ArrayList;
import java.util.List;


public class TestSubjectDAO {
    public static void main(String[] args) {
        SubjectDAO dao = new SubjectDAO();

        List<Subject> list = new ArrayList<>();
        String[] monHoc = {"Toan", "Ly",  "Hoa", "Anh", "Van", "Su", "Dia"};
        for(String s: monHoc){
            list.add(new Subject(0, s));
        }
        for(Subject sb: list){
            if(dao.insert(sb)){
                System.out.println("them " + sb.getSubjectName());
            }
            else{
                System.out.println("that bai");
            }
        }

        
    }
}

----------------------------------------------------------------
// FILE: src\test\TestUserDAO.java
----------------------------------------------------------------
package test;

import grademanager.dao.UserDAO;
import grademanager.model.User;

import java.util.ArrayList;
import java.util.List;

public class TestUserDAO {
    public static void main(String[] args) {
        UserDAO dao = new UserDAO();

        List<User> list = new ArrayList<>();
        String[] teacher = {"gv01", "gv02", "gv03"};
        String[] name = {"Nguyen Van A", "Nguyen Van B", "Nguyen Van C"};
        for(int i=0; i<3; i++){
            list.add(new User(0, teacher[i], "123456", name[i], "TEACHER"));
        }

        for(User u: list){
            if(dao.insert(u)){
                System.out.println("ThÃªm giÃ¡o viÃªn: " + u.getFullName() + " (ID=" + u.getUserId() + ")");
            } else {
                System.out.println("Tháº¥t báº¡i khi thÃªm " + u.getFullName());
            }
        }
    }
}

