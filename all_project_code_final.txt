// --- FILE: \src\grademanager\controller\AdminDashboardController.java ---
package grademanager.controller;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.layout.AnchorPane;
import javafx.scene.Parent;
import javafx.fxml.FXMLLoader;
import java.io.IOException;

public class AdminDashboardController {

    @FXML private Button studentManagementButton;
    @FXML private Button teacherManagementButton;
    @FXML private Button classManagementButton;
    @FXML private Button subjectManagementButton;
    @FXML private Button assignmentButton;
    @FXML private Button logoutButton;

    @FXML private AnchorPane mainContentPane;

    // Mở màn hình quản lý sinh viên
    @FXML
    private void handleStudentManagement() {
        loadView("/grademanager/view/StudentManagementView.fxml");
    }

    // Mở màn hình quản lý giáo viên
    @FXML
    private void handleTeacherManagement() {
        loadView("/grademanager/view/TeacherManagementView.fxml");
    }

    // Mở màn hình quản lý lớp học
    @FXML
    private void handleClassManagement() {
        loadView("/grademanager/view/ClassManagementView.fxml");
    }

    // Mở màn hình quản lý môn học
    @FXML
    private void handleSubjectManagement() {
        loadView("/grademanager/view/SubjectManagementView.fxml");
    }

    // Mở màn hình phân công giảng dạy
    @FXML
    private void handleAssignment() {
        loadView("/grademanager/view/AssignmentView.fxml");
    }

    // Đăng xuất
    @FXML
    private void handleLogout() {
        System.out.println("Đăng xuất thành công!");
        // TODO: load lại màn hình login
        loadView("/grademanager/view/designLoginScreen.fxml");
    }

    // Hàm tiện ích để load view khác vào mainContentPane
    private void loadView(String fxmlPath) {
        try {
            Parent view = FXMLLoader.load(getClass().getResource(fxmlPath));
            mainContentPane.getChildren().setAll(view);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}


// --- FILE: \src\grademanager\controller\AssignmentController.java ---
package grademanager.controller;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import grademanager.model.Assignment;

public class AssignmentController {

    @FXML private ComboBox<String> teacherComboBox;
    @FXML private ComboBox<String> classComboBox;
    @FXML private ComboBox<String> subjectComboBox;

    @FXML private TableView<Assignment> assignmentTableView;
    @FXML private TableColumn<Assignment, String> teacherNameColumn;
    @FXML private TableColumn<Assignment, String> classNameColumn;
    @FXML private TableColumn<Assignment, String> subjectNameColumn;

    @FXML private Button addButton;
    @FXML private Button deleteButton;

    private ObservableList<Assignment> assignmentList = FXCollections.observableArrayList();

    @FXML
    private void initialize() {
        // Gắn dữ liệu mẫu cho ComboBox
        teacherComboBox.setItems(FXCollections.observableArrayList("GV01 - Nguyễn Văn A", "GV02 - Trần Thị B"));
        classComboBox.setItems(FXCollections.observableArrayList("10A1", "11B2", "12C3"));
        subjectComboBox.setItems(FXCollections.observableArrayList("Toán", "Văn", "Anh"));

        // Gắn dữ liệu cột (hiển thị tên thay vì ID)
        teacherNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("Teacher#" + cellData.getValue().getTeacherId()));
        classNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("Class#" + cellData.getValue().getClassId()));
        subjectNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("Subject#" + cellData.getValue().getSubjectId()));

        assignmentTableView.setItems(assignmentList);
    }

    @FXML
    private void handleAddButton() {
        if (teacherComboBox.getValue() != null && classComboBox.getValue() != null && subjectComboBox.getValue() != null) {
            Assignment assignment = new Assignment(
                assignmentList.size() + 1,
                teacherComboBox.getSelectionModel().getSelectedIndex() + 1, // giả định ID
                classComboBox.getSelectionModel().getSelectedIndex() + 1,
                subjectComboBox.getSelectionModel().getSelectedIndex() + 1
            );
            assignmentList.add(assignment);
        }
    }

    @FXML
    private void handleDeleteButton() {
        Assignment selected = assignmentTableView.getSelectionModel().getSelectedItem();
        if (selected != null) {
            assignmentList.remove(selected);
        }
    }
}


// --- FILE: \src\grademanager\controller\GradeManagementController.java ---
package grademanager.controller;

import grademanager.model.Grade;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.util.converter.DoubleStringConverter;

public class GradeManagementController {

    @FXML private ComboBox<String> classComboBox;
    @FXML private ComboBox<String> subjectComboBox;
    @FXML private Button loadButton;
    @FXML private Button saveButton;

    @FXML private TableView<Grade> gradeTableView;
    @FXML private TableColumn<Grade, Integer> studentIdColumn;
    @FXML private TableColumn<Grade, String> studentNameColumn;
    @FXML private TableColumn<Grade, Double> midtermScoreColumn;
    @FXML private TableColumn<Grade, Double> finalScoreColumn;

    private ObservableList<Grade> gradeList = FXCollections.observableArrayList();

    @FXML
    private void initialize() {
        // Gắn dữ liệu mẫu cho ComboBox
        classComboBox.setItems(FXCollections.observableArrayList("10A1", "11B2", "12C3"));
        subjectComboBox.setItems(FXCollections.observableArrayList("Toán", "Văn", "Anh"));

        // Gắn dữ liệu cột
        studentIdColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getStudent()).asObject());
        studentNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("HS#" + cellData.getValue().getStudent()));

        midtermScoreColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleDoubleProperty(cellData.getValue().getScore()).asObject());
        finalScoreColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleDoubleProperty(cellData.getValue().getScore()).asObject());

        // Cho phép chỉnh sửa trực tiếp điểm
        midtermScoreColumn.setCellFactory(TextFieldTableCell.forTableColumn(new DoubleStringConverter()));
        midtermScoreColumn.setOnEditCommit(event -> {
            Grade g = event.getRowValue();
            g.setScore(event.getNewValue());
        });

        finalScoreColumn.setCellFactory(TextFieldTableCell.forTableColumn(new DoubleStringConverter()));
        finalScoreColumn.setOnEditCommit(event -> {
            Grade g = event.getRowValue();
            g.setScore(event.getNewValue());
        });

        gradeTableView.setItems(gradeList);
        gradeTableView.setEditable(true);
    }

    @FXML
    private void handleClassSelection() {
        // xử lý khi chọn lớp
        System.out.println("Lớp được chọn: " + classComboBox.getValue());
    }

    @FXML
    private void handleSubjectSelection() {
        // xử lý khi chọn môn
        System.out.println("Môn được chọn: " + subjectComboBox.getValue());
    }

    @FXML
    private void handleLoadGrades() {
        // Tải dữ liệu mẫu (thực tế sẽ lấy từ DAO/database)
        gradeList.clear();
        gradeList.add(new Grade(1, 101, 1, "Midterm", 7.5));
        gradeList.add(new Grade(2, 102, 1, "Final", 8.0));
    }

    @FXML
    private void handleSaveChanges() {
        // Lưu dữ liệu (thực tế sẽ gọi DAO để update database)
        for (Grade g : gradeList) {
            System.out.println("Lưu điểm: " + g.getStudent() + " - " + g.getScore());
        }
    }
}


// --- FILE: \src\grademanager\controller\LoginController.java ---
package grademanager.controller;

import java.io.IOException;

import grademanager.dao.UserDAO;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.stage.Stage;
import grademanager.model.User;

public class LoginController {

    @FXML
    private TextField usernameField;

    @FXML
    private PasswordField passwordField;

    @FXML
    private Label errorLabel;

    private UserDAO userDAO = new UserDAO();

    @FXML
    private void handleLoginButtonAction() {
        String username = usernameField.getText();
        String password = passwordField.getText();

        if (username.isEmpty() || password.isEmpty()) {
            errorLabel.setText("Vui lòng nhập đầy đủ thông tin!");
            return;
        }

        User user = userDAO.login(username, password);

        if (user != null) {
            try {
                FXMLLoader loader;
                Parent root;

                if ("admin".equalsIgnoreCase(user.getRole())) {
                    loader = new FXMLLoader(getClass().getResource("/grademanager/view/AdminDashboard.fxml"));
                } else if ("teacher".equalsIgnoreCase(user.getRole())) {
                    loader = new FXMLLoader(getClass().getResource("/grademanager/view/TeacherDashboard.fxml"));
                } else {
                    errorLabel.setText("Không xác định được vai trò người dùng!");
                    return;
                }

                root = loader.load();
                Stage stage = (Stage) usernameField.getScene().getWindow();
                stage.setScene(new Scene(root));
                stage.show();

            } catch (IOException e) {
                e.printStackTrace();
                errorLabel.setText("Lỗi khi tải màn hình!");
            }
        } else {
            errorLabel.setText("Tên đăng nhập hoặc mật khẩu không đúng!");
        }
    }
}


// --- FILE: \src\grademanager\controller\SchoolClassManagementController.java ---
package grademanager.controller;

import grademanager.dao.ClassroomDAO;
import grademanager.model.SchoolClass;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

public class SchoolClassManagementController {

    @FXML private TableView<SchoolClass> classTableView;
    @FXML private TableColumn<SchoolClass, Integer> idColumn;
    @FXML private TableColumn<SchoolClass, String> classNameColumn;
    @FXML private TableColumn<SchoolClass, String> academicYearColumn;
    @FXML private TableColumn<SchoolClass, String> teacherNameColumn;

    @FXML private TextField classNameField;
    @FXML private TextField academicYearField;
    @FXML private ComboBox<String> homeroomTeacherComboBox;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ClassroomDAO classroomDAO = new ClassroomDAO();
    private ObservableList<SchoolClass> classList = FXCollections.observableArrayList();

    private SchoolClass selectedClass;

    @FXML
    private void initialize() {
        // Gắn dữ liệu cột
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getClassId()).asObject());
        classNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getClassName()));
        academicYearColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getAcademicYear()));
        teacherNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty("GV#" + cellData.getValue().getTeacherId()));

        // Load dữ liệu từ DB
        loadClasses();

        // Gắn dữ liệu mẫu cho ComboBox giáo viên (thực tế sẽ lấy từ TeacherDAO)
        homeroomTeacherComboBox.setItems(FXCollections.observableArrayList("GV01 - Nguyễn Văn A", "GV02 - Trần Thị B"));

        // Lắng nghe chọn dòng trong bảng
        classTableView.getSelectionModel().selectedItemProperty().addListener((obs, oldSel, newSel) -> {
            if (newSel != null) {
                selectedClass = newSel;
                showClassDetails(newSel);
                updateButton.setDisable(false);
                deleteButton.setDisable(false);
            }
        });
    }

    private void loadClasses() {
        classList.setAll(classroomDAO.getAll());
        classTableView.setItems(classList);
    }

    private void showClassDetails(SchoolClass c) {
        classNameField.setText(c.getClassName());
        academicYearField.setText(c.getAcademicYear());
        homeroomTeacherComboBox.setValue("GV#" + c.getTeacherId());
    }

    @FXML
    private void handleAddButton() {
        SchoolClass c = new SchoolClass(
            0,
            classNameField.getText(),
            academicYearField.getText(),
            homeroomTeacherComboBox.getSelectionModel().getSelectedIndex() + 1 // giả định ID GV
        );
        if (classroomDAO.insert(c)) {
            loadClasses();
            clearForm();
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedClass != null) {
            selectedClass.setClassName(classNameField.getText());
            selectedClass.setAcademicYear(academicYearField.getText());
            selectedClass.setTeacherId(homeroomTeacherComboBox.getSelectionModel().getSelectedIndex() + 1);
            if (classroomDAO.update(selectedClass)) {
                loadClasses();
                clearForm();
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedClass != null) {
            if (classroomDAO.delete(selectedClass.getClassId())) {
                loadClasses();
                clearForm();
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        classNameField.clear();
        academicYearField.clear();
        homeroomTeacherComboBox.getSelectionModel().clearSelection();
        selectedClass = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }
}


// --- FILE: \src\grademanager\controller\StudentManagementController.java ---
package grademanager.controller;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import grademanager.model.Student;

public class StudentManagementController {

    @FXML private TableView<Student> studentTableView;
    @FXML private TableColumn<Student, Integer> idColumn;
    @FXML private TableColumn<Student, String> nameColumn;
    @FXML private TableColumn<Student, String> dobColumn;
    @FXML private TableColumn<Student, String> genderColumn;
    @FXML private TableColumn<Student, String> addressColumn;
    @FXML private TableColumn<Student, Integer> classColumn;

    @FXML private TextField nameField;
    @FXML private DatePicker dobPicker;
    @FXML private TextField addressField;
    @FXML private ComboBox<String> genderComboBox;
    @FXML private ComboBox<Integer> classComboBox;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ObservableList<Student> studentList = FXCollections.observableArrayList();

    @FXML
    private void initialize() {
        // Gắn dữ liệu cột
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getStudentId()).asObject());
        nameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getFullName()));
        dobColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getDateOfBirth().toString()));
        genderColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getGender()));
        addressColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getAddress()));
        classColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getClassroom()).asObject());

        studentTableView.setItems(studentList);

        // Gắn dữ liệu mẫu cho comboBox
        genderComboBox.setItems(FXCollections.observableArrayList("Nam", "Nữ"));
        classComboBox.setItems(FXCollections.observableArrayList(10, 11, 12));

        // Lắng nghe chọn dòng
        studentTableView.getSelectionModel().selectedItemProperty().addListener(
            (obs, oldSelection, newSelection) -> showStudentDetails(newSelection));
    }

    @FXML
    private void handleAddButton() {
        Student student = new Student(
            studentList.size() + 1,
            nameField.getText(),
            dobPicker.getValue(),
            genderComboBox.getValue(),
            addressField.getText(),
            classComboBox.getValue()
        );
        studentList.add(student);
        clearForm();
    }

    @FXML
    private void handleUpdateButton() {
        Student selected = studentTableView.getSelectionModel().getSelectedItem();
        if (selected != null) {
            selected.setFullName(nameField.getText());
            selected.setDateOfBirth(dobPicker.getValue());
            selected.setGender(genderComboBox.getValue());
            selected.setAddress(addressField.getText());
            selected.setClass(classComboBox.getValue());
            studentTableView.refresh();
        }
    }

    @FXML
    private void handleDeleteButton() {
        Student selected = studentTableView.getSelectionModel().getSelectedItem();
        if (selected != null) {
            studentList.remove(selected);
            clearForm();
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void showStudentDetails(Student student) {
        if (student != null) {
            nameField.setText(student.getFullName());
            dobPicker.setValue(student.getDateOfBirth());
            genderComboBox.setValue(student.getGender());
            addressField.setText(student.getAddress());
            classComboBox.setValue(student.getClassroom());
            updateButton.setDisable(false);
            deleteButton.setDisable(false);
        }
    }

    private void clearForm() {
        nameField.clear();
        dobPicker.setValue(null);
        genderComboBox.setValue(null);
        addressField.clear();
        classComboBox.setValue(null);
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }
}


// --- FILE: \src\grademanager\controller\SubjectManagementController.java ---
package grademanager.controller;

import grademanager.dao.SubjectDAO;
import grademanager.model.Subject;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

public class SubjectManagementController {

    @FXML private TextField subjectNameField;
    @FXML private TableView<Subject> subjectTableView;
    @FXML private TableColumn<Subject, Integer> idColumn;
    @FXML private TableColumn<Subject, String> nameColumn;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private SubjectDAO subjectDAO = new SubjectDAO();
    private ObservableList<Subject> subjectList = FXCollections.observableArrayList();
    private Subject selectedSubject;

    @FXML
    private void initialize() {
        // Gắn dữ liệu cột
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getSubjectId()).asObject());
        nameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getSubjectName()));

        // Load dữ liệu từ DB
        loadSubjects();

        // Lắng nghe chọn dòng trong bảng
        subjectTableView.getSelectionModel().selectedItemProperty().addListener((obs, oldSel, newSel) -> {
            if (newSel != null) {
                selectedSubject = newSel;
                showSubjectDetails(newSel);
                updateButton.setDisable(false);
                deleteButton.setDisable(false);
            }
        });
    }

    private void loadSubjects() {
        subjectList.setAll(subjectDAO.getAll());
        subjectTableView.setItems(subjectList);
    }

    private void showSubjectDetails(Subject s) {
        subjectNameField.setText(s.getSubjectName());
    }

    @FXML
    private void handleAddButton() {
        Subject s = new Subject(0, subjectNameField.getText());
        if (subjectDAO.insert(s)) {
            loadSubjects();
            clearForm();
        }
    }

    @FXML
    private void handleUpdateButton() {
        if (selectedSubject != null) {
            selectedSubject.setSubjectName(subjectNameField.getText());
            if (subjectDAO.update(selectedSubject)) {
                loadSubjects();
                clearForm();
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        if (selectedSubject != null) {
            if (subjectDAO.delete(selectedSubject.getSubjectId())) {
                loadSubjects();
                clearForm();
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void clearForm() {
        subjectNameField.clear();
        selectedSubject = null;
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }
}


// --- FILE: \src\grademanager\controller\TeacherDashboardController.java ---
package grademanager.controller;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.layout.AnchorPane;
import javafx.scene.Parent;
import javafx.fxml.FXMLLoader;
import java.io.IOException;
import javafx.scene.control.Label;
public class TeacherDashboardController {
    @FXML private Label welcomeLabel;
    @FXML private Button gradeManagementButton;
    @FXML private Button logoutButton;
    @FXML private AnchorPane mainContentPane;

    @FXML
    private void handleGradeManagement(){
        System.out.println("Mở màn hình nhập/xem điểm");
        loadView("/grademanager/view/GradeManagemenView.fxml");
    }
    
    @FXML
    private void handleLogout(){
        System.out.println("Đăng xuất");
        loadView("/grademanager/view/LoginScreen.fxml");
    }

    private void loadView(String fxmlPath){
        try{
            Parent view = FXMLLoader.load(getClass().getResource(fxmlPath));
            mainContentPane.getChildren().setAll(view);
        }catch(IOException e){
            e.printStackTrace();
        }
    }
}


// --- FILE: \src\grademanager\controller\TeacherManagementController.java ---
package grademanager.controller;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;

import grademanager.dao.TeacherDAO;
import grademanager.model.Teacher;

public class TeacherManagementController {

    @FXML private TableView<Teacher> teacherTableView;
    @FXML private TableColumn<Teacher, Integer> idColumn;
    @FXML private TableColumn<Teacher, String> fullNameColumn;
    @FXML private TableColumn<Teacher, String> usernameColumn;

    @FXML private TextField fullNameField;
    @FXML private TextField usernameField;
    @FXML private PasswordField passwordField;

    @FXML private Button addButton;
    @FXML private Button updateButton;
    @FXML private Button deleteButton;
    @FXML private Button clearButton;

    private ObservableList<Teacher> teacherList = FXCollections.observableArrayList();
    private TeacherDAO teacherDAO = new TeacherDAO();

    @FXML
    private void initialize() {
        // Gắn dữ liệu cột với thuộc tính trong lớp Teacher
        idColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleIntegerProperty(cellData.getValue().getUserId()).asObject());
        fullNameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getFullName()));
        usernameColumn.setCellValueFactory(cellData -> new javafx.beans.property.SimpleStringProperty(cellData.getValue().getUserName()));

        // Load dữ liệu từ DB
        teacherList.addAll(teacherDAO.getAll());
        teacherTableView.setItems(teacherList);

        // Lắng nghe chọn dòng trong bảng
        teacherTableView.getSelectionModel().selectedItemProperty().addListener(
            (obs, oldSelection, newSelection) -> showTeacherDetails(newSelection));

        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    @FXML
    private void handleAddButton() {
        Teacher teacher = new Teacher(
            teacherList.size() + 1,
            usernameField.getText(),
            passwordField.getText(),
            fullNameField.getText()
        );
        if (teacherDAO.insert(teacher)) {
            teacherList.add(teacher);
            showAlert(Alert.AlertType.INFORMATION, "Thành công", "Thêm giáo viên thành công!");
            clearForm();
        } else {
            showAlert(Alert.AlertType.ERROR, "Lỗi", "Không thể thêm giáo viên!");
        }
    }

    @FXML
    private void handleUpdateButton() {
        Teacher selected = teacherTableView.getSelectionModel().getSelectedItem();
        if (selected != null) {
            selected.setFullName(fullNameField.getText());
            selected.setUserName(usernameField.getText());
            selected.setPassWord(passwordField.getText());
            if (teacherDAO.update(selected)) {
                teacherTableView.refresh();
                showAlert(Alert.AlertType.INFORMATION, "Thành công", "Cập nhật giáo viên thành công!");
            } else {
                showAlert(Alert.AlertType.ERROR, "Lỗi", "Không thể cập nhật giáo viên!");
            }
        }
    }

    @FXML
    private void handleDeleteButton() {
        Teacher selected = teacherTableView.getSelectionModel().getSelectedItem();
        if (selected != null) {
            if (teacherDAO.delete(selected.getUserId())) {
                teacherList.remove(selected);
                clearForm();
                showAlert(Alert.AlertType.INFORMATION, "Thành công", "Xóa giáo viên thành công!");
            } else {
                showAlert(Alert.AlertType.ERROR, "Lỗi", "Không thể xóa giáo viên!");
            }
        }
    }

    @FXML
    private void handleClearButton() {
        clearForm();
    }

    private void showTeacherDetails(Teacher teacher) {
        if (teacher != null) {
            fullNameField.setText(teacher.getFullName());
            usernameField.setText(teacher.getUserName());
            passwordField.setText(teacher.getPassWord());
            updateButton.setDisable(false);
            deleteButton.setDisable(false);
        }
    }

    private void clearForm() {
        fullNameField.clear();
        usernameField.clear();
        passwordField.clear();
        updateButton.setDisable(true);
        deleteButton.setDisable(true);
    }

    private void showAlert(Alert.AlertType type, String title, String message) {
        Alert alert = new Alert(type);
        alert.setTitle(title);
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}


// --- FILE: \src\grademanager\dao\AssignmentDAO.java ---
package grademanager.dao;

import grademanager.model.Assignment;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class AssignmentDAO implements DAO<Assignment>{
    public boolean insert(Assignment as){
        String sql = "INSERT INTO Assignments(assignment_id, teacher_id, class_id, subject_id) VALUES (?,?,?,?)";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, as.getAssignmentId());
            pstmt.setInt(2, as.getTeacherId());
            pstmt.setInt(3, as.getClassId());
            pstmt.setInt(4, as.getSubjectId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi them: " + e.getMessage());
            return false;
        }
    }

    public boolean update(Assignment as){
        String sql = "UPDATE Assignments SET teacher_id = ?, class_id = ?, subject_id = ? WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            
            pstmt.setInt(1, as.getTeacherId());
            pstmt.setInt(2, as.getClassId());
            pstmt.setInt(3, as.getSubjectId());
            pstmt.setInt(4, as.getAssignmentId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    public boolean delete(int id){
        String sql = "DELETE FROM Assignments WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    public Assignment getById(int id){
        String sql = "SELECT * FROM Assignments WHERE assignment_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Assignment(rs.getInt("assignment_id"), rs.getInt("teacher_id"), rs.getInt("class_id"), rs.getInt("subject_id"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    public List<Assignment> getAll(){
        List<Assignment> as = new ArrayList<>();
        String sql = "SELECT * FROM Assignments";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                as.add(new Assignment(rs.getInt("assignment_id"), rs.getInt("teacher_id"), rs.getInt("class_id"), rs.getInt("subject_id")));
            }
            return as;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return as;
    }
}


// --- FILE: \src\grademanager\dao\ClassroomDAO.java ---
package grademanager.dao;

import grademanager.model.SchoolClass;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;


public class ClassroomDAO implements DAO<SchoolClass>{
    public boolean insert(SchoolClass c){
        String sql = "INSERT INTO Classes(class_id, class_name, academic_year, homeroom_teacher_id) VALUES (?,?,?,?)";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, c.getClassId());
            pstmt.setString(2, c.getClassName());
            pstmt.setString(3, c.getAcademicYear());
            pstmt.setInt(4, c.getTeacherId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi them lop: " + e.getMessage());
            return false;
        }
    }

    public boolean update(SchoolClass c){
        String sql = "UPDATE Classes SET class_name = ?, academic_year = ?, homeroom_teacher_id = ? WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(4, c.getClassId());
            pstmt.setString(1, c.getClassName());
            pstmt.setString(2, c.getAcademicYear());
            pstmt.setInt(3, c.getTeacherId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    public boolean delete(int id){
        String sql = "DELETE FROM Classes WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    public SchoolClass getById(int id){
        String sql = "SELECT * FROM Classes WHERE class_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new SchoolClass(rs.getInt("class_id"), rs.getString("class_name"), rs.getString("academic_year"), rs.getInt("homeroom_teacher_id"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    public List<SchoolClass> getAll(){
        List<SchoolClass> list = new ArrayList<>();
        String sql = "SELECT * FROM Classes";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                list.add(new SchoolClass(rs.getInt("class_id"), rs.getString("class_name"), rs.getString("academic_year"), rs.getInt("homeroom_teacher_id")));
            }
            return list;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
            return list;
        }
    }

}


// --- FILE: \src\grademanager\dao\DAO.java ---
package grademanager.dao;

import java.util.List;

public interface DAO<T> {
    boolean insert(T t);
    boolean update(T t);
    boolean delete(int id);
    T getById(int id);
    List<T> getAll();
}


// --- FILE: \src\grademanager\dao\GradeDAO.java ---
package grademanager.dao;

import grademanager.model.Grade;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class GradeDAO implements DAO<Grade>{
    public boolean insert(Grade g){
        String sql = "INSERT INTO Grades(grade_id, student_id, subject_id, grade_type, score) VALUES (?,?,?,?,?)";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, g.getGradeId());
            pstmt.setInt(2, g.getStudent());
            pstmt.setInt(3, g.getSubject());
            pstmt.setString(4, g.getGradeType());
            pstmt.setDouble(5, g.getScore());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi them diem: " + e.getMessage());
            return false;
        }
    }

    public boolean update(Grade g){
        String sql = "UPDATE Grades SET student_id = ?, subject_id = ?, grade_type = ?, score = ? WHERE grade_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            
            pstmt.setInt(1, g.getStudent());
            pstmt.setInt(2, g.getSubject());
            pstmt.setString(3, g.getGradeType());
            pstmt.setDouble(4, g.getScore());
            pstmt.setInt(5, g.getGradeId());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }}

    public boolean delete(int id){
        String sql = "DELETE FROM Grades WHERE grade_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    public Grade getById(int id){
        String sql = "SELECT * FROM Grades WHERE grade_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Grade(rs.getInt("grade_id"), rs.getInt("student_id"), rs.getInt("subject_id"), rs.getString("grade_type"), rs.getDouble("score"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    public List<Grade> getAll(){
        String sql = "SELECT * FROM Grades";
        List<Grade> list = new ArrayList<>();
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                list.add(new Grade(rs.getInt("grade_id"), rs.getInt("student_id"), rs.getInt("subject_id"), rs.getString("grade_type"), rs.getDouble("score")));
            }
            return list;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return list;
    }
}


// --- FILE: \src\grademanager\dao\StudentDAO.java ---
package grademanager.dao;

import grademanager.model.Student;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;
import java.sql.Date;

public class StudentDAO implements DAO<Student> {
    @Override
    public boolean insert(Student s) {

        String sql = "INSERT INTO Students(student_id, full_name, date_of_birth, gender, address, class_id) VALUES (?, ?, ?, ?, ?, ?)";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, s.getStudentId());
            pstmt.setString(2, s.getFullName());
            pstmt.setDate(3, Date.valueOf(s.getDateOfBirth()));
            pstmt.setString(4, s.getGender());
            pstmt.setString(5, s.getAddress());
            pstmt.setInt(6, s.getClassroom());
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("Loi khi cap nhat hoc sinh: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean update(Student s) {

        String sql = "UPDATE Students SET full_name = ?, date_of_birth = ?, gender = ?, address = ?, class_id = ? WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(6, s.getStudentId());
            pstmt.setString(1, s.getFullName());
            pstmt.setDate(2, Date.valueOf(s.getDateOfBirth()));
            pstmt.setString(3, s.getGender());
            pstmt.setString(4, s.getAddress());
            pstmt.setInt(5, s.getClassroom());
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi sua hoc sinh: " + e.getMessage());
            return false;
        }
    }

    @Override
    public boolean delete(int id) {

        String sql = "DELETE FROM Students WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, id);
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi xoa hoc sinh: " + e.getMessage());
            return false;
        }
    }

    @Override
    public Student getById(int id) {

        String sql = "SELECT * FROM Students WHERE student_id = ?";

        try (Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)) {
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if (rs.next()) {
                return new Student(rs.getInt("student_id"), rs.getString("full_name"), rs.getDate("date_of_birth").toLocalDate(), rs.getString("gender"), rs.getString("address"), rs.getInt("class_id"));
            }
        } catch (SQLException e) {
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<Student> getAll() {
        List<Student> list = new ArrayList<>();

        String sql = "SELECT * FROM Students";

        try (Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)) {
            while (rs.next()) {
                list.add(new Student(rs.getInt("student_id"), rs.getString("full_name"), rs.getDate("date_of_birth").toLocalDate(), rs.getString("gender"), rs.getString("address"), rs.getInt("class_id")));
            }
            return list;
        } catch (SQLException e) {
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return list;
    }
}


// --- FILE: \src\grademanager\dao\SubjectDAO.java ---
package grademanager.dao;

import grademanager.model.Subject;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class SubjectDAO implements DAO<Subject>{
    public boolean insert(Subject s){
        String sql = "INSERT INTO Subjects(subject_id, subject_name) VALUES (?,?)";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, s.getSubjectId());
            pstmt.setString(2, s.getSubjectName());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi them: " + e.getMessage());
            return false;
        }
    }

    public boolean update(Subject s){
        String sql = "UPDATE Subjects SET subject_name = ? WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(2, s.getSubjectId());
            pstmt.setString(1, s.getSubjectName());

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua: " + e.getMessage());
            return false;
        }
    }

    public boolean delete(int id){
        String sql = "DELETE FROM Subjects WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa: " + e.getMessage());
            return false;
        }
    }

    public Subject getById(int id){
        String sql = "SELECT * FROM Subjects WHERE subject_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Subject(rs.getInt("subject_id"), rs.getString("subject_name"));
            }
        }catch(SQLException e){
            System.out.println("loi khi tim kiem: " + e.getMessage());
        }
        return null;
    }

    public List<Subject> getAll(){
        List<Subject> s = new ArrayList<>();
        String sql = "SELECT * FROM Subjects";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                s.add(new Subject(rs.getInt("subject_id"), rs.getString("subject_name")));
            }
            return s;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return s;
    }
}


// --- FILE: \src\grademanager\dao\TeacherDAO.java ---
package grademanager.dao;

import grademanager.model.Teacher;
import grademanager.util.DatabaseConnector;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class TeacherDAO implements DAO<Teacher> {
    

    @Override
    public boolean insert(Teacher t){

        String sql = "INSERT INTO Users(user_id, username, password, full_name, role) VALUES (?,?,?,?,?)";

        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, t.getUserId());
            pstmt.setString(2, t.getUserName());
            pstmt.setString(3, t.getPassWord());
            pstmt.setString(4, t.getFullName());
            pstmt.setString(5, "TEACHER");

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi them giao vien: " + e.getMessage());
            return false;
        }
    }



    public boolean update(Teacher t){
        String sql = "UPDATE Users SET username = ?, password = ?, full_name = ?, role = ? WHERE user_id = ?";

        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(5, t.getUserId());
            pstmt.setString(1, t.getUserName());
            pstmt.setString(2, t.getPassWord());
            pstmt.setString(3, t.getFullName());
            pstmt.setString(4, "TEACHER");

            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi sua giao vien: " + e.getMessage());
            return false;
        }
    }

    public boolean delete(int id){

        String sql = "DELETE FROM Users WHERE user_id = ?";
        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){
            pstmt.setInt(1, id);
            return pstmt.executeUpdate() > 0;
        }catch(SQLException e){
            System.out.println("loi khi xoa giao vien: " + e.getMessage());
            return false;
        }
    }

    public Teacher getById(int id){
        String sql = "SELECT * FROM Users WHERE user_id = ?";

        try(Connection conn = DatabaseConnector.getConnection(); PreparedStatement pstmt = conn.prepareStatement(sql)){

            pstmt.setInt(1, id);
            ResultSet rs = pstmt.executeQuery();
            if(rs.next()){
                return new Teacher(id, rs.getString("username"), rs.getString("password"), rs.getString("full_name"));
            }
        }catch(SQLException e){
            System.out.println("loi khi lay tim kiem giao vien: " + e.getMessage());
        }
        return null;
    }


    public List<Teacher> getAll(){
        List<Teacher> list = new ArrayList<>();
        String sql = "SELECT * FROM Users WHERE role = 'TEACHER'";
        try(Connection conn = DatabaseConnector.getConnection(); Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)){
            while(rs.next()){
                list.add(new Teacher(rs.getInt("user_id"), rs.getString("username"), rs.getString("password"), rs.getString("full_name")));
            }

            return list;
        }catch(SQLException e){
            System.out.println("loi khi lay thong tin: " + e.getMessage());
        }
        return list;
    }
}


// --- FILE: \src\grademanager\dao\UserDAO.java ---
package grademanager.dao;

import grademanager.model.User;
import grademanager.util.DatabaseConnector;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class UserDAO implements DAO<User> {

    @Override
    public boolean insert(User user) {
        String sql = "INSERT INTO Users (username, password, full_name, role) VALUES (?, ?, ?, ?)";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setString(1, user.getUserName());
            stmt.setString(2, user.getPassWord());
            stmt.setString(3, user.getFullName());
            stmt.setString(4, user.getRole());

            return stmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi them nguoi dung: " + e.getMessage());
        }
        return false;
    }

    @Override
    public boolean update(User user) {
        String sql = "UPDATE Users SET username=?, password=?, full_name=?, role=? WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setString(1, user.getUserName());
            stmt.setString(2, user.getPassWord());
            stmt.setString(3, user.getFullName());
            stmt.setString(4, user.getRole());
            stmt.setInt(5, user.getUserId());

            return stmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi sua nguoi dung: " + e.getMessage());
        }
        return false;
    }

    @Override
    public boolean delete(int id) {
        String sql = "DELETE FROM Users WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setInt(1, id);
            return stmt.executeUpdate() > 0;
        } catch (SQLException e) {
            System.out.println("loi khi xoa nguoi dung: " + e.getMessage());
        }
        return false;
    }

    @Override
    public User getById(int id) {
        String sql = "SELECT * FROM Users WHERE user_id=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setInt(1, id);
            ResultSet rs = stmt.executeQuery();
            if (rs.next()) {
                return new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("full_name"),
                    rs.getString("role")
                );
            }
        } catch (SQLException e) {
            System.out.println("loi khi tim kiem nguoi dung: " + e.getMessage());
        }
        return null;
    }

    @Override
    public List<User> getAll() {
        List<User> users = new ArrayList<>();
        String sql = "SELECT * FROM Users";
        try (Connection conn = DatabaseConnector.getConnection();
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(sql)) {

            while (rs.next()) {
                users.add(new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("user_name"),
                    rs.getString("role")
                ));
            }
        } catch (SQLException e) {
            System.out.println("loi khi lay thong tin nguoi dung: " + e.getMessage());
        }
        return users;
    }

    // Hàm tiện ích cho đăng nhập
    public User login(String username, String password) {
        String sql = "SELECT * FROM Users WHERE username=? AND password=?";
        try (Connection conn = DatabaseConnector.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {

            stmt.setString(1, username);
            stmt.setString(2, password);
            ResultSet rs = stmt.executeQuery();

            if (rs.next()) {
                return new User(
                    rs.getInt("user_id"),
                    rs.getString("username"),
                    rs.getString("password"),
                    rs.getString("full_name"),
                    rs.getString("role")
                );
            }
        } catch (SQLException e) {
            System.out.println("loi khi dang nhap: " + e.getMessage());
        }
        return null;
    }
}


// --- FILE: \src\grademanager\model\Admin.java ---
package grademanager.model;

public class Admin extends User{
    public Admin(){
        super();
        setRole("Admin");
    }

    public Admin(int userId, String username, String password, String fullName){
        super(userId, username, password, fullName, "Admin");
    }

    @Override
    public String toString(){
        return "Admin: " + getFullName() + "(" + getUserName() + ")";
    }
}


// --- FILE: \src\grademanager\model\Assignment.java ---
package grademanager.model;

public class Assignment{
    private int assignmentId;
    private int teacherId;
    private int classId;
    private int subjectId;

    public Assignment() {}

    public Assignment(int assignmentId, int teacherId, int classId, int subjectId){
        this.assignmentId = assignmentId;
        this.teacherId = teacherId;
        this.classId = classId;
        this.subjectId = subjectId;
    }

    public void setAssignmentId(int assignmentId){ this.assignmentId = assignmentId;}
    public int getAssignmentId(){ return assignmentId;}

    public void setTeacherId(int teacherId) { this.teacherId = teacherId; }
    public int getTeacherId() { return teacherId; }

    public void setClassId(int classId) { this.classId = classId; }
    public int getClassId() { return classId; }

    public void setSubjectId(int subjectId) { this.subjectId = subjectId; }
    public int getSubjectId() { return subjectId; }

    @Override
    public String toString(){
        return "Assignment{ID: " + assignmentId +
        ", TeacherId: " + teacherId +
        ", Class: " + classId +
        ", SubjectId: " + subjectId +
        "}";
    }
}


// --- FILE: \src\grademanager\model\Grade.java ---
package grademanager.model;



public class Grade{
    private int gradeId;
    private int studentId;
    private int subjectId;
    private String gradeType;
    private double score;

    public Grade(){}

    public Grade(int gradeId, int studentId, int subjectId, String gradeType, double score){
        this.gradeId = gradeId;
        this.studentId = studentId;
        this.subjectId = subjectId;
        this.gradeType = gradeType;
        this.score = score;
    }

    public void setGradId(int gradeId){ this.gradeId = gradeId;}
    public int getGradeId(){ return gradeId;}

    public void setStudent(int s){ this.studentId = s;}
    public int getStudent(){ return studentId;}

    public void setSubject(int subjectId){ this.subjectId = subjectId;}
    public int getSubject(){ return subjectId;}

    public void setGradeType(String gradeType){ this.gradeType = gradeType;}
    public String getGradeType(){ return gradeType;}

    public void setScore(double score){ this.score = score;}
    public double getScore(){ return score;}

    
}


// --- FILE: \src\grademanager\model\SchoolClass.java ---
package grademanager.model;

import java.util.ArrayList;
import java.util.List;

public class SchoolClass{
    private int classId;
    private String className;
    private String academicYear;
    private int teacherId;

    private List<Student> student = new ArrayList<>();

    public SchoolClass(){}

    public SchoolClass(int classId, String className, String academicYear, int teacherId){
        this.classId = classId;
        this.className = className;
        this.academicYear = academicYear;
        this.teacherId = teacherId;
    }

    public void setClassId(int classId){ this.classId = classId;}
    public int getClassId(){ return classId;}

    public void setClassName(String className){ this.className = className;}
    public String getClassName(){ return className;}

    public void setAcademicYear(String academicYear){ this.academicYear = academicYear;}
    public String getAcademicYear(){ return academicYear;}

    public void setTeacherId(int teacherId){ this.teacherId = teacherId;}
    public int getTeacherId(){ return teacherId;}

    public List<Student> getStudent(){ return student;}
    public void addStudent(Student s){ student.add(s);}

    @Override
    public String toString(){
        return "Class: " + className + "(" + academicYear + ")";
    }
}


// --- FILE: \src\grademanager\model\Student.java ---
package grademanager.model;

import java.time.LocalDate;

public class Student{
   private int studentId;
   private String fullName;
   private LocalDate dateOfBirth;
   private String gender;
   private String address;
   private int classId;

   public Student(){}

   public Student(int studentId, String fullName, LocalDate dateOfBirth, String gender, String address, int classId){
    this.fullName = fullName;
    this.dateOfBirth = dateOfBirth;
    this.gender = gender;
    this.address = address;
    this.classId = classId;
    this.studentId = studentId;
   }

   public void setStudentId(int studentId){
      this.studentId = studentId;
   }

   public void setFullName(String fullName){
    this.fullName = fullName;
   }

   public void setDateOfBirth(LocalDate dateOfBirth){
    this.dateOfBirth = dateOfBirth;
   }

   public void setGender(String gender){
    this.gender = gender;
   }

   public void setAddress(String address){
    this.address = address;
   }

   public void setClass(int classId){
    this.classId = classId;
   }

   public int getStudentId(){
      return studentId;
   }

   public String getFullName(){
    return fullName;
   } 

   public LocalDate getDateOfBirth(){
    return dateOfBirth;
   }

   public String getGender(){
    return gender;
   }

   public String getAddress(){
    return address;
   }
   
   public int getClassroom(){
    return classId;
   }

   @Override
   public String toString(){
      return "(" + studentId + ", " + fullName + ", " + dateOfBirth + ", " + gender + ", " + address + ", " + classId + ")";
   }
} 


// --- FILE: \src\grademanager\model\Subject.java ---
package grademanager.model;

public class Subject{
    private int subjectId;
    private String subjectName;

    public Subject(){}

    public Subject(int subjectId, String subjectName){
        this.subjectId = subjectId;
        this.subjectName = subjectName;
    }

    public void setSubjectId(int subjectId){ this.subjectId = subjectId;}
    public int getSubjectId(){ return subjectId;}

    public void setSubjectName(String subjectName){ this.subjectName = subjectName;}
    public String getSubjectName(){ return subjectName;}

    @Override
    public String toString(){
        return "Subject: " + subjectName;
    }
}


// --- FILE: \src\grademanager\model\Teacher.java ---
package grademanager.model;

import java.util.ArrayList;
import java.util.List;



public class Teacher extends User{
    private List<Assignment> as = new ArrayList<>();

    public Teacher(){
        super();
        setRole("Teacher");
    }

    public Teacher(int userId, String userName, String passWord, String fullName){
        super(userId, userName, passWord, fullName, "Teacher");
    }

    public void addAssigmment(Assignment assigmment){
        as.add(assigmment);
    }

    public List<Assignment> getAssigmment(){
        return as;
    }

    @Override 
    public String toString(){
        return "Teacher: " + getFullName() + "(" + getUserName() + ")" + ", teaches " + as.size() + " classes"; 
    }
}


// --- FILE: \src\grademanager\model\User.java ---
package grademanager.model;

public class User{
    private int userId;
    private String userName;
    private String passWord;
    private String fullName;
    private String role;

    public User(){}

    public User(int userId, String userName, String passWord, String fullName, String role){
        this.userId = userId;
        this.userName = userName;
        this.passWord = passWord;
        this.fullName = fullName;
        this.role = role;
    }

    public void setUserId(int userId){ this.userId = userId;}
    public int getUserId(){ return userId;}

    public void setUserName(String userName){ this.userName = userName;}
    public String getUserName(){ return userName;}

    public void setPassWord(String passWord){ this.passWord = passWord;}
    public String getPassWord(){ return passWord;}

    public void setFullName(String fullName){ this.fullName = fullName;}
    public String getFullName(){ return fullName;}

    public void setRole(String role ){ this.role = role;}
    public String getRole(){ return role;}
}


// --- FILE: \src\grademanager\util\DatabaseConnector.java ---
package grademanager.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DatabaseConnector {
    private static final String URL = "jdbc:sqlite:database/quanlydiem.db";
    

    private DatabaseConnector() {}

    public static Connection getConnection() {
    
        try {
            Class.forName("org.sqlite.JDBC"); // bắt buộc để load driver
            Connection conn = DriverManager.getConnection(URL);
            if (conn != null && !conn.isClosed()){
                System.out.println("thanh cong");    
            }
            return conn;
        } catch (ClassNotFoundException e) {
            System.out.println("khong tim thay driver: " + e.getMessage());
        } catch (SQLException e) {
            System.out.println(" loi ket noi: " + e.getMessage());
        }
        return null;
    }

    public static void main(String[] args) {
        getConnection();
    }
}


// --- FILE: \src\grademanager\view\AdminDashboardView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AdminDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="ADMIN PANEL">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="studentManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleStudentManagement" text="Quản lý Sinh viên" />
            <Button fx:id="teacherManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleTeacherManagement" text="Quản lý Giáo viên" />
            <Button fx:id="classManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleClassManagement" text="Quản lý Lớp học" />
            <Button fx:id="subjectManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleSubjectManagement" text="Quản lý Môn học" />
            <Button fx:id="assignmentButton" maxWidth="1.7976931348623157E308" onAction="#handleAssignment" text="Phân công Giảng dạy" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="Đăng xuất" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="Chào mừng đến với Hệ thống Quản lý!" AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>


// --- FILE: \src\grademanager\view\AssignmentView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="500.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AssignmentController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="PHÂN CÔNG GIẢNG DẠY">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Giáo viên:" />
                  <ComboBox fx:id="teacherComboBox" prefWidth="150.0" />
                  <Label text="Lớp học:" />
                  <ComboBox fx:id="classComboBox" prefWidth="150.0" />
                  <Label text="Môn học:" />
                  <ComboBox fx:id="subjectComboBox" prefWidth="150.0" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" onAction="#handleAddButton" prefWidth="120.0" text="Thêm Phân công" />
                  <Button fx:id="deleteButton" onAction="#handleDeleteButton" prefWidth="120.0" text="Xóa Phân công" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sách Phân công">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="assignmentTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="teacherNameColumn" prefWidth="200.0" text="Giáo viên" />
                  <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="Lớp học" />
                  <TableColumn fx:id="subjectNameColumn" prefWidth="200.0" text="Môn học" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\view\GradeManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.GradeManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="NHẬP/XEM ĐIỂM">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Chọn Lớp:" />
                  <ComboBox fx:id="classComboBox" onAction="#handleClassSelection" prefWidth="150.0" />
                  <Label text="Chọn Môn:" />
                  <ComboBox fx:id="subjectComboBox" onAction="#handleSubjectSelection" prefWidth="150.0" />
                  <Button fx:id="loadButton" mnemonicParsing="false" onAction="#handleLoadGrades" text="Tải Bảng điểm" />
               </children>
            </HBox>
            <TableView fx:id="gradeTableView" editable="true" VBox.vgrow="ALWAYS">
              <columns>
                <TableColumn fx:id="studentIdColumn" editable="false" prefWidth="75.0" text="Mã HS" />
                <TableColumn fx:id="studentNameColumn" editable="false" prefWidth="200.0" text="Họ và Tên" />
                  <TableColumn fx:id="midtermScoreColumn" prefWidth="120.0" text="Điểm Giữa kỳ" />
                  <TableColumn fx:id="finalScoreColumn" prefWidth="120.0" text="Điểm Cuối kỳ" />
              </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
            <HBox alignment="CENTER_RIGHT">
               <children>
                  <Button fx:id="saveButton" mnemonicParsing="false" onAction="#handleSaveChanges" prefWidth="120.0" text="Lưu Thay đổi" />
               </children>
               <VBox.margin>
                  <Insets top="10.0" />
               </VBox.margin>
            </HBox>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\view\LoginScreen.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox alignment="CENTER" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="300.0" prefWidth="400.0" spacing="15.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.LoginController">
   <children>
      <Label text="ĐĂNG NHẬP HỆ THỐNG">
         <font>
            <Font name="System Bold" size="20.0" />
         </font>
      </Label>
      <TextField fx:id="usernameField" promptText="Tên đăng nhập" />
      <PasswordField fx:id="passwordField" promptText="Mật khẩu" />
      <Button fx:id="loginButton" mnemonicParsing="false" onAction="#handleLoginButtonAction" prefWidth="100.0" text="Đăng nhập" />
      <Label fx:id="errorLabel" textFill="RED" />
   </children>
   <padding>
      <Insets bottom="20.0" left="40.0" right="40.0" top="20.0" />
   </padding>
</VBox>


// --- FILE: \src\grademanager\view\SchoolClassManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SchoolClassManagementController">
   <children>
      <TableView fx:id="classTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="Tên Lớp" />
            <TableColumn fx:id="academicYearColumn" prefWidth="150.0" text="Năm học" />
            <TableColumn fx:id="teacherNameColumn" prefWidth="250.0" text="GV Chủ nhiệm" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ LỚP HỌC"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="Tên Lớp:" />
                  <TextField fx:id="classNameField" GridPane.columnIndex="1" />
                  <Label text="Năm học:" GridPane.rowIndex="1" />
                  <TextField fx:id="academicYearField" promptText="Ví dụ: 2024-2025" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="GV Chủ nhiệm:" GridPane.rowIndex="2" />
                  <ComboBox fx:id="homeroomTeacherComboBox" prefWidth="300.0" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="212.0" text="Danh sách Lớp học">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\view\StudentManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.StudentManagementController">
   <children>
      <TableView fx:id="studentTableView" layoutX="14.0" layoutY="270.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="270.0">
        <columns>
          <TableColumn fx:id="idColumn" prefWidth="50.0" text="ID" />
          <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Họ và Tên" />
          <TableColumn fx:id="dobColumn" prefWidth="100.0" text="Ngày sinh" />
          <TableColumn fx:id="genderColumn" prefWidth="75.0" text="Giới tính" />
          <TableColumn fx:id="addressColumn" prefWidth="200.0" text="Địa chỉ" />
          <TableColumn fx:id="classColumn" prefWidth="75.0" text="Lớp" />
        </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ SINH VIÊN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
              </rowConstraints>
               <children>
                  <Label text="Họ và Tên:" />
                  <TextField fx:id="nameField" GridPane.columnIndex="1" />
                  <Label text="Ngày sinh:" GridPane.rowIndex="1" />
                  <DatePicker fx:id="dobPicker" prefWidth="250.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Địa chỉ:" GridPane.rowIndex="2" />
                  <TextField fx:id="addressField" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2" />
                  <Label text="Giới tính:" GridPane.columnIndex="2" />
                  <ComboBox fx:id="genderComboBox" prefWidth="250.0" GridPane.columnIndex="3" />
                  <Label text="Lớp học:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                  <ComboBox fx:id="classComboBox" prefWidth="250.0" GridPane.columnIndex="3" GridPane.rowIndex="1" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="247.0" text="Danh sách Sinh viên">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\view\SubjectManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="400.0" prefWidth="500.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SubjectManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ MÔN HỌC">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Tên Môn học:" />
                  <TextField fx:id="subjectNameField" prefWidth="250.0" HBox.hgrow="ALWAYS" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sách Môn học">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="subjectTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
                  <TableColumn fx:id="nameColumn" prefWidth="350.0" text="Tên Môn học" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\view\TeacherDashboardView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label fx:id="welcomeLabel" alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="TEACHER PANEL" wrapText="true">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="gradeManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleGradeManagement" text="Nhập/Xem điểm" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="Đăng xuất" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="Hãy chọn một chức năng từ thanh điều hướng bên trái." AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>


// --- FILE: \src\grademanager\view\TeacherManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherManagementController">
   <children>
      <TableView fx:id="teacherTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="fullNameColumn" prefWidth="250.0" text="Họ và Tên" />
            <TableColumn fx:id="usernameColumn" prefWidth="200.0" text="Tên đăng nhập" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ GIÁO VIÊN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="Họ và Tên:" />
                  <TextField fx:id="fullNameField" GridPane.columnIndex="1" />
                  <Label text="Tên đăng nhập:" GridPane.rowIndex="1" />
                  <TextField fx:id="usernameField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Mật khẩu:" GridPane.rowIndex="2" />
                  <PasswordField fx:id="passwordField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="14.0" layoutY="210.0" prefWidth="133.0" text="Danh sách Giáo viên">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\grademanager\Launcher.java ---
package grademanager;

public class Launcher {
    public static void main(String[] args) {
        Main.main(args);
    }
}


// --- FILE: \src\grademanager\Main.java ---
package grademanager; // Package gốc

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.util.Objects;

public class Main extends Application {

    @Override
    public void start(Stage primaryStage) {
        try {
            // Đường dẫn này cực kỳ quan trọng, nó phải trỏ đúng tới file FXML
            // Dựa trên code cũ của bạn, đường dẫn có vẻ là: /grademanager/view/LoginScreen.fxml
            Parent root = FXMLLoader.load(Objects.requireNonNull(getClass().getResource("/grademanager/view/LoginScreen.fxml")));
            
            Scene scene = new Scene(root);
            
            // Thiết lập tiêu đề cửa sổ
            primaryStage.setTitle("Hệ thống Quản lý Điểm Học sinh");
            
            // Không cho phép thay đổi kích thước cửa sổ login (tùy chọn)
            primaryStage.setResizable(false);
            
            primaryStage.setScene(scene);
            primaryStage.show();
            
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("Lỗi không tìm thấy file FXML hoặc lỗi code JavaFX: " + e.getMessage());
        }
    }

    public static void main(String[] args) {
        launch(args);
    }
}


// --- FILE: \src\resources\grademanager\view\AdminDashboardView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AdminDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="ADMIN PANEL">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="studentManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleStudentManagement" text="Quản lý Sinh viên" />
            <Button fx:id="teacherManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleTeacherManagement" text="Quản lý Giáo viên" />
            <Button fx:id="classManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleClassManagement" text="Quản lý Lớp học" />
            <Button fx:id="subjectManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleSubjectManagement" text="Quản lý Môn học" />
            <Button fx:id="assignmentButton" maxWidth="1.7976931348623157E308" onAction="#handleAssignment" text="Phân công Giảng dạy" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="Đăng xuất" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="Chào mừng đến với Hệ thống Quản lý!" AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>


// --- FILE: \src\resources\grademanager\view\AssignmentView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="500.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.AssignmentController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="PHÂN CÔNG GIẢNG DẠY">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Giáo viên:" />
                  <ComboBox fx:id="teacherComboBox" prefWidth="150.0" />
                  <Label text="Lớp học:" />
                  <ComboBox fx:id="classComboBox" prefWidth="150.0" />
                  <Label text="Môn học:" />
                  <ComboBox fx:id="subjectComboBox" prefWidth="150.0" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" onAction="#handleAddButton" prefWidth="120.0" text="Thêm Phân công" />
                  <Button fx:id="deleteButton" onAction="#handleDeleteButton" prefWidth="120.0" text="Xóa Phân công" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sách Phân công">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="assignmentTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="teacherNameColumn" prefWidth="200.0" text="Giáo viên" />
                  <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="Lớp học" />
                  <TableColumn fx:id="subjectNameColumn" prefWidth="200.0" text="Môn học" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\resources\grademanager\view\GradeManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.GradeManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="NHẬP/XEM ĐIỂM">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Chọn Lớp:" />
                  <ComboBox fx:id="classComboBox" onAction="#handleClassSelection" prefWidth="150.0" />
                  <Label text="Chọn Môn:" />
                  <ComboBox fx:id="subjectComboBox" onAction="#handleSubjectSelection" prefWidth="150.0" />
                  <Button fx:id="loadButton" mnemonicParsing="false" onAction="#handleLoadGrades" text="Tải Bảng điểm" />
               </children>
            </HBox>
            <TableView fx:id="gradeTableView" editable="true" VBox.vgrow="ALWAYS">
              <columns>
                <TableColumn fx:id="studentIdColumn" editable="false" prefWidth="75.0" text="Mã HS" />
                <TableColumn fx:id="studentNameColumn" editable="false" prefWidth="200.0" text="Họ và Tên" />
                  <TableColumn fx:id="midtermScoreColumn" prefWidth="120.0" text="Điểm Giữa kỳ" />
                  <TableColumn fx:id="finalScoreColumn" prefWidth="120.0" text="Điểm Cuối kỳ" />
              </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
            <HBox alignment="CENTER_RIGHT">
               <children>
                  <Button fx:id="saveButton" mnemonicParsing="false" onAction="#handleSaveChanges" prefWidth="120.0" text="Lưu Thay đổi" />
               </children>
               <VBox.margin>
                  <Insets top="10.0" />
               </VBox.margin>
            </HBox>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\resources\grademanager\view\LoginScreen.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox alignment="CENTER" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="300.0" prefWidth="400.0" spacing="15.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.LoginController">
   <children>
      <Label text="ĐĂNG NHẬP HỆ THỐNG">
         <font>
            <Font name="System Bold" size="20.0" />
         </font>
      </Label>
      <TextField fx:id="usernameField" promptText="Tên đăng nhập" />
      <PasswordField fx:id="passwordField" promptText="Mật khẩu" />
      <Button fx:id="loginButton" mnemonicParsing="false" onAction="#handleLoginButtonAction" prefWidth="100.0" text="Đăng nhập" />
      <Label fx:id="errorLabel" textFill="RED" />
   </children>
   <padding>
      <Insets bottom="20.0" left="40.0" right="40.0" top="20.0" />
   </padding>
</VBox>


// --- FILE: \src\resources\grademanager\view\SchoolClassManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SchoolClassManagementController">
   <children>
      <TableView fx:id="classTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="classNameColumn" prefWidth="150.0" text="Tên Lớp" />
            <TableColumn fx:id="academicYearColumn" prefWidth="150.0" text="Năm học" />
            <TableColumn fx:id="teacherNameColumn" prefWidth="250.0" text="GV Chủ nhiệm" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ LỚP HỌC"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="Tên Lớp:" />
                  <TextField fx:id="classNameField" GridPane.columnIndex="1" />
                  <Label text="Năm học:" GridPane.rowIndex="1" />
                  <TextField fx:id="academicYearField" promptText="Ví dụ: 2024-2025" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="GV Chủ nhiệm:" GridPane.rowIndex="2" />
                  <ComboBox fx:id="homeroomTeacherComboBox" prefWidth="300.0" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="212.0" text="Danh sách Lớp học">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\resources\grademanager\view\StudentManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.StudentManagementController">
   <children>
      <TableView fx:id="studentTableView" layoutX="14.0" layoutY="270.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="270.0">
        <columns>
          <TableColumn fx:id="idColumn" prefWidth="50.0" text="ID" />
          <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Họ và Tên" />
          <TableColumn fx:id="dobColumn" prefWidth="100.0" text="Ngày sinh" />
          <TableColumn fx:id="genderColumn" prefWidth="75.0" text="Giới tính" />
          <TableColumn fx:id="addressColumn" prefWidth="200.0" text="Địa chỉ" />
          <TableColumn fx:id="classColumn" prefWidth="75.0" text="Lớp" />
        </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ SINH VIÊN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="10.0" prefWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
              </rowConstraints>
               <children>
                  <Label text="Họ và Tên:" />
                  <TextField fx:id="nameField" GridPane.columnIndex="1" />
                  <Label text="Ngày sinh:" GridPane.rowIndex="1" />
                  <DatePicker fx:id="dobPicker" prefWidth="250.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Địa chỉ:" GridPane.rowIndex="2" />
                  <TextField fx:id="addressField" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2" />
                  <Label text="Giới tính:" GridPane.columnIndex="2" />
                  <ComboBox fx:id="genderComboBox" prefWidth="250.0" GridPane.columnIndex="3" />
                  <Label text="Lớp học:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                  <ComboBox fx:id="classComboBox" prefWidth="250.0" GridPane.columnIndex="3" GridPane.rowIndex="1" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="15.0" layoutY="247.0" text="Danh sách Sinh viên">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\resources\grademanager\view\SubjectManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="400.0" prefWidth="500.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.SubjectManagementController">
   <children>
      <VBox spacing="10.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ MÔN HỌC">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <Label text="Tên Môn học:" />
                  <TextField fx:id="subjectNameField" prefWidth="250.0" HBox.hgrow="ALWAYS" />
               </children>
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
            <Label text="Danh sách Môn học">
               <font><Font name="System Bold" size="14.0" /></font>
               <VBox.margin><Insets top="20.0" /></VBox.margin>
            </Label>
            <TableView fx:id="subjectTableView" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
                  <TableColumn fx:id="nameColumn" prefWidth="350.0" text="Tên Môn học" />
               </columns>
               <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>
         </children>
      </VBox>
   </children>
</AnchorPane>


// --- FILE: \src\resources\grademanager\view\TeacherDashboardView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherDashboardController">
   <left>
      <VBox prefWidth="200.0" spacing="10.0" style="-fx-background-color: #f4f4f4;" BorderPane.alignment="CENTER">
         <children>
            <Label fx:id="welcomeLabel" alignment="CENTER" prefHeight="50.0" prefWidth="200.0" text="TEACHER PANEL" wrapText="true">
               <font><Font name="System Bold" size="18.0" /></font>
            </Label>
            <Button fx:id="gradeManagementButton" maxWidth="1.7976931348623157E308" onAction="#handleGradeManagement" text="Nhập/Xem điểm" />
            <Separator prefWidth="200.0" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleLogout" text="Đăng xuất" />
         </children>
         <padding><Insets left="10.0" right="10.0" top="10.0" /></padding>
      </VBox>
   </left>
   <center>
      <AnchorPane fx:id="mainContentPane" BorderPane.alignment="CENTER">
         <children>
            <Label text="Hãy chọn một chức năng từ thanh điều hướng bên trái." AnchorPane.leftAnchor="20.0" AnchorPane.topAnchor="20.0">
               <font><Font size="18.0" /></font>
            </Label>
         </children>
      </AnchorPane>
   </center>
</BorderPane>


// --- FILE: \src\resources\grademanager\view\TeacherManagementView.fxml ---
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="580.0" prefWidth="680.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="grademanager.controller.TeacherManagementController">
   <children>
      <TableView fx:id="teacherTableView" layoutY="230.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="230.0">
         <columns>
            <TableColumn fx:id="idColumn" prefWidth="75.0" text="ID" />
            <TableColumn fx:id="fullNameColumn" prefWidth="250.0" text="Họ và Tên" />
            <TableColumn fx:id="usernameColumn" prefWidth="200.0" text="Tên đăng nhập" />
         </columns>
         <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
      </TableView>
      <VBox spacing="10.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0">
         <children>
            <Label text="QUẢN LÝ GIÁO VIÊN"><font><Font name="System Bold" size="18.0" /></font></Label>
            <GridPane hgap="10.0" vgap="10.0">
               <columnConstraints>
                  <ColumnConstraints hgrow="SOMETIMES" maxWidth="150.0" minWidth="10.0" prefWidth="100.0" />
                  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                  <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
               </rowConstraints>
               <children>
                  <Label text="Họ và Tên:" />
                  <TextField fx:id="fullNameField" GridPane.columnIndex="1" />
                  <Label text="Tên đăng nhập:" GridPane.rowIndex="1" />
                  <TextField fx:id="usernameField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <Label text="Mật khẩu:" GridPane.rowIndex="2" />
                  <PasswordField fx:id="passwordField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
               </children>
            </GridPane>
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <children>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddButton" prefWidth="80.0" text="Thêm" />
                  <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdateButton" prefWidth="80.0" text="Lưu" />
                  <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDeleteButton" prefWidth="80.0" text="Xóa" />
                  <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClearButton" prefWidth="80.0" text="Mới" />
               </children>
               <VBox.margin><Insets top="10.0" /></VBox.margin>
            </HBox>
         </children>
      </VBox>
      <Label layoutX="14.0" layoutY="210.0" prefWidth="133.0" text="Danh sách Giáo viên">
         <font>
            <Font name="System Bold" size="14.0" />
         </font>
      </Label>
   </children>
</AnchorPane>


// --- FILE: \src\test\TestAssignmentDAO.java ---
package test;

import grademanager.dao.AssignmentDAO;
import grademanager.model.Assignment;

public class TestAssignmentDAO {
    public static void main(String[] args) {
        AssignmentDAO dao = new AssignmentDAO();

        // 1. Thêm mới Assignment
        Assignment a1 = new Assignment(1, 101, 201, 301); // giả định ID
        boolean inserted = dao.insert(a1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy tất cả Assignment
        System.out.println("Danh sách Assignment:");
        for (Assignment a : dao.getAll()) {
            System.out.println(a.getAssignmentId() + " - Teacher:" + a.getTeacherId()
                    + " - Class:" + a.getClassId() + " - Subject:" + a.getSubjectId());
        }

        // 3. Cập nhật Assignment
        a1.setTeacherId(102); // đổi giáo viên
        boolean updated = dao.update(a1);
        System.out.println("Update: " + updated);

        // 4. Lấy Assignment theo ID
        Assignment found = dao.getById(1);
        if (found != null) {
            System.out.println("Found Assignment: " + found.getAssignmentId()
                    + " - Teacher:" + found.getTeacherId());
        }

        // 5. Xóa Assignment
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);

    }
}


// --- FILE: \src\test\TestClassroomDAO.java ---
package test;

import grademanager.dao.ClassroomDAO;
import grademanager.model.SchoolClass;

public class TestClassroomDAO {
    public static void main(String[] args) {
        ClassroomDAO dao = new ClassroomDAO();

        // 1. Thêm lớp mới
        SchoolClass c1 = new SchoolClass(1, "10A1", "2024-2025", 1);
        boolean inserted = dao.insert(c1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy danh sách tất cả lớp
        System.out.println("Danh sách lớp:");
        for (SchoolClass c : dao.getAll()) {
            System.out.println(c.getClassId() + " - " + c.getClassName());
        }

        // 3. Sửa thông tin lớp
        c1.setClassName("10A1 - Updated");
        boolean updated = dao.update(c1);
        System.out.println("Update: " + updated);

        // 4. Lấy lớp theo ID
        SchoolClass found = dao.getById(1);
        System.out.println("Found: " + found.getClassName());

        // 5. Xóa lớp
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);
    }
}


// --- FILE: \src\test\TestGradeDAO.java ---
package test;

import grademanager.dao.GradeDAO;
import grademanager.model.Grade;

public class TestGradeDAO {
    public static void main(String[] args) {
        GradeDAO dao = new GradeDAO();

        // 1. Thêm mới Grade
        Grade g1 = new Grade(1, 101, 201, "Midterm", 7.5); // giả định ID
        boolean inserted = dao.insert(g1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy tất cả Grade
        System.out.println("Danh sách điểm:");
        for (Grade g : dao.getAll()) {
            System.out.println("GradeID:" + g.getGradeId()
                    + " - Student:" + g.getStudent()
                    + " - Subject:" + g.getSubject()
                    + " - Type:" + g.getGradeType()
                    + " - Score:" + g.getScore());
        }

        // 3. Cập nhật Grade
        g1.setScore(8.0); // đổi điểm
        boolean updated = dao.update(g1);
        System.out.println("Update: " + updated);

        // 4. Lấy Grade theo ID
        Grade found = dao.getById(1);
        if (found != null) {
            System.out.println("Found Grade: " + found.getGradeId()
                    + " - Score:" + found.getScore());
        }

        // 5. Xóa Grade
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);
    }
}


// --- FILE: \src\test\TestStudentDAO.java ---
package test;

import grademanager.dao.StudentDAO;
import grademanager.model.Student;

import java.time.LocalDate;

public class TestStudentDAO {
    public static void main(String[] args) {
        StudentDAO dao = new StudentDAO();

        // 1. Thêm mới Student
        Student s1 = new Student(1, "Nguyen Van A", LocalDate.of(2007, 5, 20), "Nam", "Ha Noi", 101);
        boolean inserted = dao.insert(s1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy tất cả Student
        System.out.println("Danh sách học sinh:");
        for (Student s : dao.getAll()) {
            System.out.println("ID:" + s.getStudentId()
                    + " - Name:" + s.getFullName()
                    + " - DOB:" + s.getDateOfBirth()
                    + " - Gender:" + s.getGender()
                    + " - Address:" + s.getAddress()
                    + " - ClassID:" + s.getClassroom());
        }

        // 3. Cập nhật Student
        s1.setFullName("Nguyen Van A - Updated");
        s1.setAddress("Hai Phong");
        boolean updated = dao.update(s1);
        System.out.println("Update: " + updated);

        // 4. Lấy Student theo ID
        Student found = dao.getById(1);
        if (found != null) {
            System.out.println("Found Student: " + found.getStudentId()
                    + " - Name:" + found.getFullName()
                    + " - Address:" + found.getAddress());
        }

        // 5. Xóa Student
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);
    }
}


// --- FILE: \src\test\TestSubjectDAO.java ---
package test;

import grademanager.dao.SubjectDAO;
import grademanager.model.Subject;

public class TestSubjectDAO {
    public static void main(String[] args) {
        SubjectDAO dao = new SubjectDAO();

        // 1. Thêm môn học mới
        Subject s1 = new Subject(1, "Toán học");
        boolean inserted = dao.insert(s1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy tất cả môn học
        System.out.println("Danh sách môn học:");
        for (Subject s : dao.getAll()) {
            System.out.println("ID: " + s.getSubjectId() + " - Tên: " + s.getSubjectName());
        }

        // 3. Cập nhật tên môn học
        s1.setSubjectName("Toán nâng cao");
        boolean updated = dao.update(s1);
        System.out.println("Update: " + updated);

        // 4. Lấy môn học theo ID
        Subject found = dao.getById(1);
        if (found != null) {
            System.out.println("Found: " + found.getSubjectId() + " - " + found.getSubjectName());
        }

        // 5. Xóa môn học
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);
    }
}


// --- FILE: \src\test\TestTeacherDAO.java ---
package test;

import grademanager.dao.TeacherDAO;
import grademanager.model.Teacher;

public class TestTeacherDAO {
    public static void main(String[] args) {
        TeacherDAO dao = new TeacherDAO();

        // 1. Thêm giáo viên mới
        Teacher t1 = new Teacher(1, "teacher01", "123456", "Nguyen Van A");
        boolean inserted = dao.insert(t1);
        System.out.println("Insert: " + inserted);

        // 2. Lấy tất cả giáo viên
        System.out.println("Danh sách giáo viên:");
        for (Teacher t : dao.getAll()) {
            System.out.println("ID:" + t.getUserId()
                    + " - Username:" + t.getUserName()
                    + " - Password:" + t.getPassWord()
                    + " - FullName:" + t.getFullName());
        }

        // 3. Cập nhật thông tin giáo viên
        t1.setUserName("teacher01_updated");
        t1.setPassWord("654321");
        t1.setFullName("Nguyen Van A - Updated");
        boolean updated = dao.update(t1);
        System.out.println("Update: " + updated);

        // 4. Lấy giáo viên theo ID
        Teacher found = dao.getById(1);
        if (found != null) {
            System.out.println("Found Teacher: " + found.getUserId()
                    + " - Username:" + found.getUserName()
                    + " - FullName:" + found.getFullName());
        }

        // 5. Xóa giáo viên
        boolean deleted = dao.delete(1);
        System.out.println("Delete: " + deleted);
    }
}


